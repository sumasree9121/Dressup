function student_navigation_popover(referer,is_data_filled){if(referer=="preferences")if(is_data_filled){$(".preferences_element").addClass("filled");$(".preferences_element span").addClass("icon-preferences-filled");$(".preferences_element span").removeClass("icon-preferences-linear")}else{$(".preferences_element").removeClass("filled");$(".preferences_element").addClass("active");$(".preferences_element span").removeClass("icon-preferences-filled");$(".preferences_element span").addClass("icon-preferences-linear")}else if(referer==
"personal_details")if(is_data_filled){$(".personal_details_element").addClass("filled");$(".personal_details_element span").addClass("icon-personal-details-filled");$(".personal_details_element span").removeClass("icon-personal-details-linear")}else{$(".personal_details_element").removeClass("filled");$(".personal_details_element").addClass("active");$(".personal_details_element span").removeClass("icon-personal-details-filled");$(".personal_details_element span").addClass("icon-personal-details-linear");
profile_incomplete_student_navigation_popover("personal_details")}else if(referer=="education_details")if(is_data_filled){$(".education_details_element").addClass("filled");$(".education_details_element span").addClass("icon-education-details-filled");$(".education_details_element span").removeClass("icon-education-details-linear");$(".experiences_element a").attr("href","/student/work_experiences?isFromNavBar=true");$(".skills_element a").attr("href","/student/skills?isFromNavBar=true");$(".work_samples_element a").attr("href",
"/student/work_samples?isFromNavBar=true")}else{$(".education_details_element").removeClass("filled");$(".education_details_element").addClass("active");$(".education_details_element span").removeClass("icon-education-details-filled");$(".education_details_element span").addClass("icon-education-details-linear");profile_incomplete_student_navigation_popover("education_details")}else if(referer=="experiences"||referer=="other_experiences")if(is_data_filled){$(".experiences_element").addClass("filled");
$(".experiences_element span").addClass("icon-experiences-filled");$(".experiences_element span").removeClass("icon-experiences-linear")}else{$(".experiences_element").removeClass("filled");$(".experiences_element").addClass("active");$(".experiences_element span").removeClass("icon-experiences-filled");$(".experiences_element span").addClass("icon-experiences-linear")}else if(referer=="work_samples"||referer=="additional_details")if(is_data_filled){$(".work_samples_element").addClass("filled");$(".work_samples_element span").addClass("icon-work-samples-filled");
$(".work_samples_element span").removeClass("icon-work-samples-linear")}else{$(".work_samples_element").removeClass("filled");$(".work_samples_element").addClass("active");$(".work_samples_element span").removeClass("icon-work-samples-filled");$(".work_samples_element span").addClass("icon-work-samples-linear")}else if(referer=="skills")if(is_data_filled){$(".skills_element").addClass("filled");$(".skills_element span").addClass("icon-skills-filled");$(".skills_element span").removeClass("icon-skills-linear")}else{$(".skills_element").removeClass("filled");
$(".skills_element").addClass("active");$(".skills_element span").removeClass("icon-skills-filled");$(".skills_element span").addClass("icon-skills-linear")}}
function profile_incomplete_student_navigation_popover(referer){if(referer=="personal_details"){$(".education_details_element").removeClass("active");$(".education_details_element").removeClass("filled");$(".education_details_element a").removeAttr("href");$(".experiences_element a").removeAttr("href");$(".skills_element a").removeAttr("href");$(".work_samples_element a").removeAttr("href")}else if(referer=="education_details"){$(".experiences_element a").removeAttr("href");$(".skills_element a").removeAttr("href");
$(".work_samples_element a").removeAttr("href")}$(".experiences_element").removeClass("active");$(".work_samples_element").removeClass("active");$(".skills_element").removeClass("active");$(".experiences_element").removeClass("filled");$(".work_samples_element").removeClass("filled");$(".skills_element").removeClass("filled")}
function updateStudentNavigationTabs(referer){var elmnt="";if(referer=="preferences"){$("#preferencesTab").addClass("active");elmnt=document.getElementById("resumeTab")}else if(referer=="dashboard"){$("#applicationTab").addClass("active");elmnt=document.getElementById("applicationTab")}else if(referer=="resume"){$("#resumeTab").addClass("active");elmnt=document.getElementById("blank")}if(elmnt)elmnt.scrollIntoView();$("html,body").animate({scrollTop:$("body").offset().top},"fast");$(".navTabItem").click(function(){if($(this).hasClass("active"))return false;
var url=$(this).attr("url");window.location=url})};$(document).ready(function(){call_autocomplete_location("current_city");call_autocomplete_location("second_city_of_residence");if(typeof isRegisteredThroughGoogleLogin!=="undefined"&&isRegisteredThroughGoogleLogin){goog_report_conversion();dataLayer.push({"event":"student_signup","eventCategory":"student_signup","eventAction":"student_signup_success","eventLabel":eventLabel});var image=new Image(1,1);image.src="//conv.indeed.com/pagead/conv/9459742475614127/?script=0"}$(document.body).on("click",
"#personal-detail-submit",function(){setTimeout(function(){if($("#phone_primary").val()==""||$("#country_code").val()==""){$("#phone_primary").closest(".input-group").removeClass("has-success");$("#phone_primary").closest(".input-group").addClass("has-error");$("#phone_number-error").html("This field is required.")}else if(!($("#country_code").val().match(/^[/\s+/][0-9]+$/)&&$("#country_code").val().length<=5)){$("#phone_primary").closest(".input-group").removeClass("has-success");$("#phone_primary").closest(".input-group").addClass("has-error");
$("#phone_number-error").html("Please specify a valid country code starting with +.")}else if($("#country_code").val()=="+91"&&!$("#phone_primary").val().match(/^[6789][0-9]{9}$/)){$("#phone_primary").closest(".input-group").removeClass("has-success");$("#phone_primary").closest(".input-group").addClass("has-error");$("#phone_number-error").html("Please specify a valid phone number.")}if($("#salutation").val()==""||$("#first_name").val()==""){if($("#salutation").val()==""){$("#salutation").closest("select").addClass("error");
$("#salutation").closest("select").removeClass("valid")}$("#salutation").closest(".form-group").addClass("has-error");$("#salutation").closest(".form-group").removeClass("has-success");$("#name-error").html("This field is required.")}},1)});$("#salutation").focusout(function(){if($("#salutation").val()==""){$("#salutation").closest("select").addClass("error");$("#salutation").closest("select").removeClass("valid")}});if(is_personal_details_complete)student_navigation_popover("personal_details",true);
else student_navigation_popover("personal_details",false);$("#personal_details #email").attr("readonly","true");$("#personal_details #email").attr("disabled","true");reset_personal_details_form();$(document.body).on("click",".personal_details_edit",function(){reset_personal_details_form()});$("#personal_details").submit(function(e){e.preventDefault()}).validate({onfocusout:function(element){this.element(element)},groups:{phone_number:"country_code phone_primary",name:"salutation first_name last_name"},
rules:{salutation:{required:true},first_name:{required:true,user_name:true,maxlength:100},last_name:{user_name:true,maxlength:100},current_city:{required:true,valid_city:function(){is_valid_city=false;if($("#current_city_location_id").val()=="")return true;is_valid_city=true;return true}},second_city_of_residence:{valid_city:function(){is_valid_city=false;if($("#second_city_of_residence_location_id").val()=="")return true;is_valid_city=true;return true}},country_code:{required:true,countrycode:true},
phone_primary:{required:true,onlynumbers:true,mobilenumber:function(){var country_code=$("#country_code").val();if(country_code=="+91")return true}}},messages:{current_city:{required:"Please also select that location from the drop-down"}},errorPlacement:function(label,element){if(element.attr("name")==="salutation"||element.attr("name")==="first_name"||element.attr("name")==="last_name")label.insertAfter("#last_name");else if(element.attr("name")==="phone_primary"||element.attr("name")==="country_code")label.insertAfter("#phone_primary");
else label.insertAfter(element)},highlight:function(label){$(label).closest(".form-group").addClass("has-error");$(label).closest(".form-group").removeClass("has-success");$(label).closest("input").addClass("error");$(label).closest("input").removeClass("valid")},success:function(label){$(label).closest(".form-group").addClass("has-success");$(label).closest(".form-group").removeClass("has-error");$(label).closest("input").addClass("valid");$(label).closest("input").removeClass("error")},submitHandler:function(){$("#salutation").attr("disabled",
false);var data=$("#personal_details").serialize();var url="";url="/student/personal_details_update";NProgress.start();$(".loading_image").show();$.ajax(url,{data:data,success:personal_details_update_success,error:onError,type:"POST"});return false}});dataLayer.push({"Referrer":"https://internshala.com"})});
var personal_details_update_success=function(data){try{NProgress.done();if(!data.success)throw_error(data.errorThrown);else{reset_personal_details_form();if(!data.successPage){$("#personal-detail-modal").modal("hide");$("#personal_details_view").html(data.htmlResponse);$("#personal_details_resume_first_name").val(data.first_name);$("#personal_details_resume_last_name").val(data.last_name);$("#personal_details_resume_email").val(data.email);$("#personal_details_resume_country_code").val(data.country_code);
$("#personal_details_resume_phone_primary").val(data.phone_primary);$("#personal_details_resume_current_city").val(data.current_city);$("#personal_details_resume_second_city_of_residence").val(data.second_city_of_residence);$("#personal_details_resume_current_city_location_id").val(data.current_city_location_id);$("#personal_details_resume_second_city_of_residence_location_id").val(data.second_city_of_residence_location_id);success_notification(data.successMsg)}else window.location=data.successPage}}catch(e){throw_error(e);
NProgress.done();$(".loading_image").hide()}};function reset_personal_details_form(){reset_profile_forms()};$(document).ready(function(){set_year_to_select("#college_start_year_container","start_year",0);set_year_to_select("#college_end_year_container","end_year",0);set_year_to_select("#school_year_of_completion_container","year_of_completion",0);$(document.body).on("click","#go_to_training_btn",function(){window.location=training_url});$(".cantFindDegreeMessage").hide();$(".cantFindDegree").click(function(){$(".cantFindDegreeMessage").slideToggle()});$(document.body).on("change","#year_of_completion",
function(){$("#school-form").validate().element("#year_of_completion")});$(document.body).on("change","#end_year",function(){$("#college-form").validate().element("#end_year");if($("#college-form #start_year").val())$("#college-form").validate().element("#start_year")});$(document.body).on("change","#start_year",function(){$("#college-form").validate().element("#start_year");if($("#college-form #end_year").val())$("#college-form").validate().element("#end_year")});$(document.body).on("change","#performance-scale-college",
function(){$("#college-form").validate().element("#performance-college")});$(document.body).on("change","#performance-college",function(){$("#college-form").validate().element("#performance-scale-college")});$(document.body).on("change","#performance-scale-school",function(){$("#school-form").validate().element("#performance-school")});$(document.body).on("change","#performance-school",function(){$("#school-form").validate().element("#performance-scale-school")});toggle_education_button_container();
$(document.body).on("click",".education-tabs",function(){reset_education_detail_form()});$(document.body).on("click",".edit",function(){reset_education_detail_form();var education_type=$(this).parent().attr("education_type");var education_detail_id=$(this).parent().attr("education_detail_id");if(education_type=="college")populate_college_form(education_detail_id);else if(education_type=="school")populate_school_form(education_detail_id)});$(document.body).on("click",".delete",function(){var result=
confirm("Are you sure you want to delete?");if(result===true){var education_type=$(this).parent().attr("education_type");var url="/student_education/delete_student_"+education_type;var education_detail_id=$(this).parent().attr("education_detail_id");var csrfName=$("#csrf").attr("name");var csrfValue=$("#csrf").attr("value");var dataString={};dataString["id"]=education_detail_id;dataString[csrfName]=csrfValue;NProgress.start();$(".loading_image").show();var data=dataString;$.ajax(url,{type:"POST",
success:delete_education_detail_success,data:data})}return false});$("input[name='degree_completion_status']").click(function(){var degree_completion_status=$("input[name='degree_completion_status']:checked").val();if(degree_completion_status=="pursuing")$("#degree_end_year").text("Expected End Year*:");else if(degree_completion_status=="completed")$("#degree_end_year").text("End Year*:")});$("input[name='school_completion_status']").click(function(){var school_completion_status=$("input[name='school_completion_status']:checked").val();
if(school_completion_status=="pursuing")$("#school_completion_year").text("Expected Year Of Completion*:");else if(school_completion_status=="completed")$("#school_completion_year").text("Year Of Completion*:")});call_autocomplete("school","school");$("#school").autocomplete("option","appendTo","#school-form");$("#school").autocomplete({focus:function(event,ui){this.value=ui.item.label}});call_autocomplete("board","board");$("#board").autocomplete("option","appendTo","#school-form");$("#board").autocomplete({focus:function(event,
ui){this.value=ui.item.label}});call_autocomplete("college","college");$("#college").autocomplete("option","appendTo","#college-form");$("#college").autocomplete({focus:function(event,ui){this.value=ui.item.label}});call_autocomplete("degree","degree");$("#degree").autocomplete("option","appendTo","#college-form");$("#degree").autocomplete({focus:function(event,ui){this.value=ui.item.label;if(ui.item.value=="No match found"){$("#degree").val("");return false}},select:function(event,ui){if(ui.item.value==
"No match found"){$("#degree").val("");return false}}});call_autocomplete("stream","stream");$("#stream").autocomplete("option","appendTo","#college-form");$("#stream").autocomplete({focus:function(event,ui){this.value=ui.item.label}});$("#secondary-tab").click(function(){initialize_secondary_modal()});$("#senior_secondary-tab").click(function(){initialize_senior_secondary_modal()});$("#graduation-tab").click(function(){initialize_graduation_modal()});$("#post-graduation-tab").click(function(){initialize_post_graduation_modal()});
$("#diploma-tab").click(function(){initialize_diploma_modal()});$("#phd-tab").click(function(){initialize_phd_modal()});$("#college-form").submit(function(e){e.preventDefault()}).validate({ignore:"",onfocusout:function(element){this.element(element)},rules:{college:{required:true,maxlength:100,valid_institute:true},degree_completion_status:{required:true},degree:{required:function(){return $("#college-type").val()=="ug"||$("#college-type").val()=="pg"},maxlength:100,valid_degree:true},stream:{maxlength:100,
required:function(){return $("#college-type").val()=="diploma"||$("#college-type").val()=="phd"},valid_stream:true},start_year:{required:true,min:1980,max:function(){return(new Date).getFullYear()+1}},end_year:{number:true,required:true,min:function(){if($("#college-type").val()=="diploma")return $("#start_year").val();else if($("#start_year").val())return parseInt($("#start_year").val())+1;else return 0}},performance_scale:{required:function(){return $(" #performance-college").val()!=""}},performance:{decimalnumbers:true,
max:function(elem){var performance_scale=$("#performance-scale-college").val();return parseInt(performance_scale)},greater_than:0}},errorPlacement:function(label,element){if(element.attr("name")==="start_year")label.insertAfter("#start_year_chosen");else if(element.attr("name")==="end_year")label.insertAfter("#end_year_chosen");else if(element.attr("name")==="performance")label.insertAfter("#performance-college");else if(element.attr("name")==="degree_completion_status")label.insertAfter("#degree_completion_status_completed_container");
else label.insertAfter(element)},highlight:function(label){$(label).closest(".form-group").addClass("has-error");$(label).closest(".form-group").removeClass("has-success");$(label).closest("input").addClass("error");$(label).closest("input").removeClass("valid")},success:function(label){$(label).closest(".form-group").addClass("has-success");$(label).closest(".form-group").removeClass("has-error");$(label).closest("input").addClass("valid");$(label).closest("input").removeClass("error")},submitHandler:function(){var data=
$("#college-form").serialize();var url="";url="/student_education/add_student_college";if($("#college-submit").val()=="Update")url="/student_education/update_student_college";NProgress.start();$(".loading_image").show();$.ajax(url,{data:data,success:college_add_success,error:onError,type:"POST"});return false}});$("#school-form").submit(function(e){e.preventDefault()}).validate({ignore:"",onfocusout:function(element){this.element(element)},rules:{school:{maxlength:100,valid_school:true},school_completion_status:{required:true},
board:{required:true,maxlength:100},year_of_completion:{number:true,min:1980,required:true,max:function(){return(new Date).getFullYear()+1}},performance_scale:{required:function(){return $("#performance-school").val()!=""}},performance:{decimalnumbers:true,max:function(elem){var performance_scale=$("#performance-scale-school").val();return parseInt(performance_scale)},greater_than:0}},errorPlacement:function(label,element){if(element.attr("name")==="performance")label.insertAfter("#performance-school");
else if(element.attr("name")==="year_of_completion")label.insertAfter("#year_of_completion_chosen");else if(element.attr("name")==="school_completion_status")label.insertAfter("#school_completion_status_container_completed");else label.insertAfter(element)},highlight:function(label){$(label).closest(".form-group").addClass("has-error");$(label).closest(".form-group").removeClass("has-success");$(label).closest("input").addClass("error");$(label).closest("input").removeClass("valid")},success:function(label){$(label).closest(".form-group").addClass("has-success");
$(label).closest(".form-group").removeClass("has-error");$(label).closest("input").addClass("valid");$(label).closest("input").removeClass("error")},submitHandler:function(){var data=$("#school-form").serialize();var url="";url="/student_education/add_student_school";if($("#school-submit").val()=="Update")url="/student_education/update_student_school";NProgress.start();$(".loading_image").show();$.ajax(url,{data:data,success:school_add_success,error:onError,type:"POST"});return false}});color_of_select_placeholder($("#start_year"));
color_of_select_placeholder($("#end_year"));color_of_select_placeholder($("#year_of_completion"));color_of_select_placeholder($("#stream-school"))});
var school_add_success=function(data){try{NProgress.done();if(data.success){$("#prefilled-education-details-table").html(data.htmlResponse);$("#school-modal").modal("hide");if(data.source=="add"){var education_type=data.education_type;$("#"+education_type+"-tab").hide();success_notification("Successfully Added")}else success_notification("Successfully Updated");reset_education_detail_form();toggle_education_button_container()}else{if(data.errorThrown.validationError){throw_validation_error(data.errorThrown.validationError,
"#school-form");return}failure_notification(data.errorThrown)}}catch(e){throw_error(e);NProgress.done();$(".loading_image").hide()}};
var college_add_success=function(data){try{NProgress.done();if(data.success){$("#prefilled-education-details-table").html(data.htmlResponse);$("#college-modal").modal("hide");if(data.source=="add")success_notification("Successfully Added");else success_notification("Successfully Updated");reset_education_detail_form();toggle_education_button_container()}else{if(data.errorThrown.validationError){throw_validation_error(data.errorThrown.validationError,"#college-form");return}failure_notification(data.errorThrown)}}catch(e){throw_error(e);
NProgress.done();$(".loading_image").hide()}};var delete_education_detail_success=function(data){try{NProgress.done();if(data.success===true){var id=data.id;var type=data.type;var education_type=data.education_type;$("#education_detail_container_"+type+"_"+id).remove();$("#"+education_type+"-tab").show();success_notification("Successfully Deleted")}else failure_notification(data.errorThrown)}catch(e){throw_error(e);NProgress.done();$(".loading_image").hide()}toggle_education_button_container();reset_education_detail_form()};
function initialize_secondary_modal(){$("#school-title").text("X (Secondary) details");$("#school_completion_status_label").text("Matriculation status*:");$("#school_completion_year").text("Year Of Completion*:");$("#school_completion_status_pursuing").prop("checked",false);$("#school_completion_status_completed").prop("checked",false);$("#school-modal #stream_container").hide();$("#school-modal #school-type").val("secondary")}
function initialize_senior_secondary_modal(){$("#school-title").text("XII (Senior Secondary or Equivalent) details");$("#school_completion_status_label").text("Intermediate status*:");$("#school_completion_year").text("Year Of Completion*:");$("#school_completion_status_pursuing").prop("checked",false);$("#school_completion_status_completed").prop("checked",false);$("#school-modal #stream_container").show();$("#school-modal #school-type").val("senior_secondary")}
function initialize_graduation_modal(){$("#college-title").text("Graduation details");$("#degree_completion_status_label").text("Graduation status*:");$("#degree_end_year").text("End Year*:");$("#degree_completion_status_completed").prop("checked",false);$("#degree_completion_status_pursuing").prop("checked",false);$("#college-modal #degree_container").show();$("#college-modal #college-type").val("ug");$("#college-modal #stream").attr("placeholder","Ex: Economics ");$("#college-modal #degree").attr("placeholder",
"Ex: B.Sc (Hons.) ");$("#college-modal #college").attr("placeholder","Ex: Hindu College ");$("#college-modal #stream_label").html("Stream:");$(".tips_education").html("<ul><li>Example: If your degree is B.Sc in Chemistry, then select Bachelor of Science (B.Sc) in <b>degree</b> and Chemistry in <b>streams</b>.</li><li>If you can't find your degree, check for typos or different ways of writing your degree or choose from the closest available. Write to <a href='mailto:support@internshala.com'>support@internshala.com</a> if you are pursuing a degree not available in the list.</li></ul>")}
function initialize_post_graduation_modal(){$("#college-title").text("Post Graduation details");$("#degree_completion_status_label").text("Post Graduation status*:");$("#degree_end_year").text("End Year*:");$("#degree_completion_status_completed").prop("checked",false);$("#degree_completion_status_pursuing").prop("checked",false);$("#college-modal #degree_container").show();$("#college-modal #college-type").val("pg");$("#college-modal #stream").attr("placeholder","Ex: Finance ");$("#college-modal #degree").attr("placeholder",
"Ex: MBA ");$("#college-modal #college").attr("placeholder","Ex: New Delhi Institute of Management ");$("#college-modal #stream_label").html("Stream:");$(".tips_education").html("<ul><li>Example: If your degree is M.Sc in Chemistry, then select Master of Science (M.Sc) in <b>degree</b> and Chemistry in <b>streams</b>.</li><li>If you can't find your degree, check for typos or different ways of writing your degree or choose from the closest available. Write to <a href='mailto:support@internshala.com'>support@internshala.com</a> if you are pursuing a degree not available in the list.</li></ul>")}
function initialize_diploma_modal(){$("#college-title").text("Diploma details");$("#degree_completion_status_label").text("Diploma status*:");$("#degree_end_year").text("End Year*:");$("#degree_completion_status_completed").prop("checked",false);$("#degree_completion_status_pursuing").prop("checked",false);$("#college-modal #degree_container").hide();$("#college-modal #college-type").val("diploma");$("#college-modal #stream").attr("placeholder","Ex: Creative Writing ");$("#college-modal #college").attr("placeholder",
"Ex: IGNOU ");$("#college-modal #stream_label").html("Stream*:")}
function initialize_phd_modal(){$("#college-title").text("PhD details");$("#degree_completion_status_label").text("PhD status*:");$("#degree_end_year").text("End Year*:");$("#degree_completion_status_completed").prop("checked",false);$("#degree_completion_status_pursuing").prop("checked",false);$("#college-modal #degree_container").hide();$("#college-modal #college-type").val("phd");$("#college-modal #stream").attr("placeholder","Ex: Commerce & Bussiness Studies ");$("#college-modal #college").attr("placeholder",
"Ex: Jamia Millia Islamia");$("#college-modal #stream_label").html("Stream*:")}
function populate_college_form(education_detail_id){var college=$("#education_detail_college_college_"+education_detail_id).val();var start_year=$("#education_detail_start_year_college_"+education_detail_id).val();var end_year=$("#education_detail_end_year_college_"+education_detail_id).val();var degree_completion_status=$("#education_detail_degree_completion_status_college_"+education_detail_id).val();var type=$("#education_detail_type_college_"+education_detail_id).val();var degree=$("#education_detail_degree_college_"+
education_detail_id).val();var stream=$("#education_detail_stream_college_"+education_detail_id).val();var performance_scale=$("#education_detail_performance_scale_college_"+education_detail_id).val();var performance=$("#education_detail_performance_college_"+education_detail_id).val();if(type=="ug")initialize_graduation_modal();else if(type=="pg")initialize_post_graduation_modal();else if(type=="diploma")initialize_diploma_modal();else if(type=="phd")initialize_phd_modal();$("#college-modal #college-type").val(type);
$("#college-modal #education-detail-id").val(education_detail_id);$("#college-modal #college").val(college);set_year_to_select("#college_start_year_container","start_year",start_year);set_year_to_select("#college_end_year_container","end_year",end_year);$("#college-modal #degree").val(degree);$("#college-modal #stream").val(stream);$("#college-modal #performance-scale-college").val(performance_scale);$("#college-modal #performance-college").val(performance);if(degree_completion_status=="completed")$("#degree_completion_status_completed").prop("checked",
true);else if(degree_completion_status=="pursuing"){$("#degree_completion_status_pursuing").prop("checked",true);$("#degree_end_year").text("Expected End Year*:")}else{$("#degree_completion_status_completed").prop("checked",false);$("#degree_completion_status_pursuing").prop("checked",false)}$("#college-submit").val("Update")}
function populate_school_form(education_detail_id){var school=$("#education_detail_school_school_"+education_detail_id).val();var board=$("#education_detail_board_school_"+education_detail_id).val();var type=$("#education_detail_type_school_"+education_detail_id).val();var degree=$("#education_detail_degree_school_"+education_detail_id).val();var stream=$("#education_detail_stream_school_"+education_detail_id).val();var performance_scale=$("#education_detail_performance_scale_school_"+education_detail_id).val();
var performance=$("#education_detail_performance_school_"+education_detail_id).val();var end_year=$("#education_detail_end_year_school_"+education_detail_id).val();var school_completion_status=$("#education_detail_school_completion_status_school_"+education_detail_id).val();if(type=="secondary")initialize_secondary_modal();else if(type=="senior_secondary")initialize_senior_secondary_modal();if(school_completion_status=="completed")$("#school_completion_status_completed").prop("checked",true);else if(school_completion_status==
"pursuing"){$("#school_completion_status_pursuing").prop("checked",true);$("#school_completion_year").text("Expected Year Of Completion*:")}else{$("#school_completion_status_pursuing").prop("checked",false);$("#school_completion_status_completed").prop("checked",false)}$("#school-modal #school-type").val(type);$("#school-modal #education-detail-id").val(education_detail_id);$("#school-modal #board").val(board);$("#school-modal #stream-school").val(stream);set_year_to_select("#school_year_of_completion_container",
"year_of_completion",end_year);$("#school-modal #performance-scale-school").val(performance_scale);$("#school-modal #performance-school").val(performance);$("#school-modal #school").val(school);$("#school-submit").val("Update")}
function toggle_education_button_container(){remove_resume_education_empty_div();var count_education_element=$(".prefilled-education-details-row").length;if(count_education_element){student_navigation_popover("education_details",true);$(".education-tabs-container .buttons_container .next-button").show();$(".prefilled-education-details-container h4").show();$("#go_to_training_btn").attr("disabled",false);$(".education-tabs-container h4").hide();$(".education-tabs-container h5").show()}else{student_navigation_popover("education_details",
false);$(".education-tabs-container .buttons_container .next-button").hide();$(".prefilled-education-details-container h4").hide();$("#go_to_training_btn").attr("disabled",true);$(".education-tabs-container h4").show();$(".education-tabs-container h5").hide()}}function remove_resume_education_empty_div(){}
function reset_education_detail_form(){$("input[type=text]").val("");$("input[type=number]").val("");reset_profile_forms();$("#school-submit").val("Save");$("#college-submit").val("Save");var collegeFormValidator=$("#college-form").validate();collegeFormValidator.resetForm();var schoolFormValidator=$("#school-form").validate();schoolFormValidator.resetForm();set_year_to_select("#college_start_year_container","start_year",0);set_year_to_select("#college_end_year_container","end_year",0);set_year_to_select("#school_year_of_completion_container",
"year_of_completion",0)}function color_of_select_placeholder(element){change_color_of_select_placeholder(element);element.change(function(){change_color_of_select_placeholder(element)})}function change_color_of_select_placeholder(element){if(element.val()=="")element.css("color","#999");else element.css("color","#333")}
function set_year_to_select(parent_div_id,element_id,selected_value){var options=generate_options_for_select(element_id,selected_value);$("#"+element_id).chosen("destroy");$(parent_div_id).html('<select data-placeholder="Choose year..." id="'+element_id+'" name="'+element_id+'" class="chosen-select form-control chosen-year" tabindex="2"><option value=""> Choose year</option>'+options+"</select>");var config={".chosen-select":{},".chosen-select-deselect":{allow_single_deselect:true},".chosen-select-no-single":{disable_search_threshold:10},
".chosen-select-no-results":{no_results_text:"Oops, nothing found!"},".chosen-select-width":{width:"95%"}};for(var selector in config)$(selector).chosen(config[selector]);$(".chosen-select").chosen()}
function generate_options_for_select(element_id,value){var options="";var min_year="";var max_year="";var selected="";if(element_id=="start_year"){min_year=start_year_min;max_year=start_year_max}else if(element_id=="end_year"){min_year=end_year_min;max_year=end_year_max}else if(element_id=="year_of_completion"){min_year=year_of_completion_min;max_year=year_of_completion_max}for(var i=max_year;i>=min_year;i--){if(i==value)selected="selected";else selected="";options=options+'<option value= "'+i+'" '+
selected+" >"+i+"</option>"}return options};var is_valid_city=false;var locations=[];
$(document).ready(function(){call_autocomplete_location("experience_location");toggle_experiences_button_container();remove_experiences_empty_div();$(document.body).on("click",".fa-internship-job",function(){experiences_form_reset()});call_autocomplete("experience_organization","experience_organization");$("#experience_organization").autocomplete("option","appendTo","#experience-form");$("#experience_organization").autocomplete({focus:function(event,ui){this.value=ui.item.label}});call_autocomplete("experience_profile",
"profile");$("#experience_profile").autocomplete("option","appendTo","#experience-form");$("#experience_profile").autocomplete({focus:function(event,ui){this.value=ui.item.label}});$(document.body).on("keypress","#experience_description",function(){if($("#experience_description").val().length>250)$("#experience-form").validate().element("#experience_description")});$(document.body).on("click",".experiences_edit",function(){experiences_form_reset();var experience_type=$(this).parent().attr("experience_type");
var experience_id=$(this).parent().attr("experience_id");if(experience_type=="job")initialize_job_modal();else if(experience_type=="internship")initialize_internship_modal();populate_experience_form(experience_type,experience_id)});$(document.body).on("click",".experiences_delete",function(){var result=confirm("Are you sure you want to delete?");if(result===true){var experience_id=$(this).parent().attr("experience_id");var url="/student_experience/delete_student_experience";NProgress.start();$(".loading_image").show();
var experience_id=$(this).parent().attr("experience_id");var csrfName=$("#csrf").attr("name");var csrfValue=$("#csrf").attr("value");var dataString={};dataString["id"]=experience_id;dataString[csrfName]=csrfValue;$.ajax(url,{type:"POST",success:delete_experience_success,data:dataString})}return false});$("#internship").click(function(){experiences_form_reset();initialize_internship_modal()});$("#job").click(function(){experiences_form_reset();initialize_job_modal()});$("#experience_is_work_from_home").change(function(){$("#experience_location").removeClass("error");
if($(this).is(":checked")){removeError("#experience_location-error");$("#experience_location").val("Work From Home");$("#experience_location").prop("disabled",true);$("#internship-job-modal #experience_location").css("background","#f6f6f6");$(".form-group").removeClass("has-success")}else{$("#experience_location").val("");$("#experience_location").prop("disabled",false);$("#internship-job-modal #experience_location").css("background","#ffffff")}});$("#experience_end_date_present").hide();$("#experience_on_going").change(function(){if($(this).is(":checked")){$("#internship-job-modal #experience_on_going").prop("checked",
true);$("#internship-job-modal #experience_end_date").val("Present");$("#internship-job-modal #experience_end_date").prop("disabled",true);$("#internship-job-modal #experience_end_date").css("background","#f6f6f6")}else{$("#internship-job-modal #experience_on_going").prop("checked",false);$("#internship-job-modal #experience_end_date").val("");$("#internship-job-modal #experience_end_date").prop("disabled",false);$("#internship-job-modal #experience_end_date").css("background","#ffffff");var experience_start_date=
$("#experience_start_date").val();$("#experience_end_date").datepicker("option","minDate",new Date(experience_start_date))}$("#experience-form .form-group .end-date").removeClass("error");$("#experience_end_date-error").html("")});$("#experience-form").validate({onfocusout:function(element){this.element(element)},rules:{experience_profile:{required:true,maxlength:100},experience_organization:{required:true,maxlength:100},experience_location:{required:function(){if($("#experience_is_work_from_home").is(":checked"))return false;
else return true},valid_city:function(){is_valid_city=false;if($("#experience_is_work_from_home").is(":checked")){is_valid_city=true;return true}if($("#experience_location_location_id").val()=="")return true;is_valid_city=true;return true}},experience_start_date:{required:true},experience_end_date:{required:function(){if($("#experience_on_going").is(":checked"))return false;else return true}},experience_description:{maxlength:250}},messages:{experience_location:{required:"Please also select that location from the drop-down"}},
errorPlacement:function(label,element){label.insertAfter(element)},highlight:function(label){$(label).closest(".form-group").addClass("has-error");$(label).closest(".form-group").removeClass("has-success");$(label).closest("input").addClass("error");$(label).closest("input").removeClass("valid")},success:function(label){$(label).closest(".form-group").addClass("has-success");$(label).closest(".form-group").removeClass("has-error");$(label).closest("input").addClass("valid");$(label).closest("input").removeClass("error")},
submitHandler:function(){$("#experience_is_work_from_home").val($("#experience_is_work_from_home").prop("checked")?1:0);$("#experience_on_going").val($("#experience_on_going").prop("checked")?1:0);var data=$("#experience-form").serialize();var url="";url="/student_experience/add_student_experience";if($("#internship-job-submit").val()=="Update")url="/student_experience/update_student_experience";NProgress.start();$(".loading_image").show();$.ajax(url,{data:data,success:experience_add_success,error:onError,
type:"POST"});return false}});make_field_readonly("#experience_start_date");make_field_readonly("#experience_end_date");$("#experience_start_date").datepicker({dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,maxDate:"-1D",beforeShow:function(e,t){$(".ui-datepicker").addClass("show_calendardates");$(".ui-datepicker").removeClass("hide_calendardates");$(document).off("focusin.bs.modal")},onClose:function(){$(document).on("focusin.bs.modal")},onSelect:function(selectedDate){$("#experience_end_date").datepicker("option",
"minDate",selectedDate);$(this).focusout()}}).on("change",function(){$(this).focus()});$("#experience_end_date").datepicker({dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,maxDate:"+0D",beforeShow:function(e,t){$(".ui-datepicker").addClass("show_calendardates");$(".ui-datepicker").removeClass("hide_calendardates");$(document).off("focusin.bs.modal")},onClose:function(){$(document).on("focusin.bs.modal")},onSelect:function(selectedDate){$("#experience_start_date").datepicker("option","maxDate",
selectedDate);$(this).focusout()}}).on("change",function(){$(this).focus()})});var delete_experience_success=function(data){try{NProgress.done();if(data.success===true){var id=data.id;$("#experience_container_"+id).remove();success_notification("Successfully Deleted");remove_experiences_empty_div();remove_resume_experiences_empty_div()}else failure_notification(data.errorThrown)}catch(e){throw_error(e);NProgress.done();$(".loading_image").hide()}toggle_experiences_button_container()};
var experience_add_success=function(data){try{NProgress.done();if(data.success){if(data.type=="internship")$(".internship-container").html(data.htmlResponse);else if(data.type=="job")$(".job-container").html(data.htmlResponse);$(".experiences-form-modal").modal("hide");if(data.source=="add")success_notification("Successfully Added");else success_notification("Successfully Updated");experiences_form_reset()}else{if(data.errorThrown.validationError){throw_validation_error(data.errorThrown.validationError);
return}failure_notification(data.errorThrown)}}catch(e){throw_error(e);NProgress.done();$(".loading_image").hide()}remove_experiences_empty_div();toggle_experiences_button_container()};
function initialize_internship_modal(){$(".experience-title").text("Internship details");$("#internship-job-modal #experience_type").val("internship");$("#internship-job-modal #experience_profile").attr("placeholder","Ex: Sales & Marketing");$("#internship-job-modal #experience_location").attr("placeholder","Ex: Mumbai, Maharashtra")}
function initialize_job_modal(){$(".experience-title").text("Job details");$("#internship-job-modal #experience_type").val("job");$("#internship-job-modal #experience_profile").attr("placeholder","Ex: Operations");$("#internship-job-modal #experience_location").attr("placeholder","Ex: New Delhi")}
function populate_experience_form(experience_type,experience_id){var unique_id=experience_type+"_"+experience_id;var experience_organization=$("#experience_organization_"+unique_id).val();var experience_profile=$("#experience_profile_"+unique_id).val();var experience_is_work_from_home=$("#experience_is_work_from_home_"+unique_id).val();var experience_description=$("#experience_description_"+unique_id).val();var experience_is_on_going=$("#experience_is_on_going_"+unique_id).val();var experience_start_date=
$("#experience_start_date_"+unique_id).val();var experience_end_date=$("#experience_end_date_"+unique_id).val();var experience_display_location=$("#experience_display_location_"+unique_id).val();var experience_location_location_id=$("#experience_location_location_id_"+unique_id).val();if(experience_is_on_going==1){$("#internship-job-modal #experience_on_going").prop("checked",true);$("#internship-job-modal #experience_end_date").val("Present");$("#internship-job-modal #experience_end_date").prop("disabled",
true);$("#internship-job-modal #experience_end_date").css("background","#f6f6f6")}else{$("#internship-job-modal #experience_on_going").prop("checked",false);$("#internship-job-modal #experience_end_date").val(experience_end_date);$("#internship-job-modal #experience_end_date").prop("disabled",false);$("#internship-job-modal #experience_end_date").css("background","#ffffff");$("#experience_end_date").datepicker("option","minDate",new Date(experience_start_date))}$("#experience_start_date").datepicker("option",
"maxDate",new Date(experience_end_date));if(experience_is_work_from_home==1){$("#internship-job-modal #experience_is_work_from_home").prop("checked",true);$("#internship-job-modal #experience_location").val("Work From Home");$("#experience_location").prop("disabled",true);$("#internship-job-modal #experience_location").css("background","#f6f6f6")}else{$("#internship-job-modal #experience_is_work_from_home").prop("checked",false);$("#internship-job-modal #experience_location").val(experience_display_location);
$("#experience_location").prop("disabled",false);$("#internship-job-modal #experience_location").css("background","#ffffff")}$("#internship-job-modal #experience_id").val(experience_id);$("#internship-job-modal #experience_organization").val(experience_organization);$("#internship-job-modal #experience_profile").val(experience_profile);$("#internship-job-modal #experience_location_location_id").val(experience_location_location_id);$("#internship-job-modal #experience_is_work_from_home").val(experience_is_work_from_home);
$("#internship-job-modal #experience_start_date").val(experience_start_date);$("#internship-job-modal #experience_on_going").val(experience_is_on_going);$("#internship-job-modal #experience_description").val(experience_description);$("#internship-job-submit").val("Update")}
function toggle_experiences_button_container(){var count_experiences_element=$(".prefilled-experiences-details-row").length;if(count_experiences_element){student_navigation_popover("experiences",true);$(".experiences-tabs-container .buttons_container .next-button").show();$(".experiences-tabs-container .buttons_container .skip-button").hide();$(".experiences-tabs-container h4").hide();$(".experiences-tabs-container h5").show()}else{student_navigation_popover("experiences",false);$(".experiences-tabs-container .buttons_container .next-button").hide();
$(".experiences-tabs-container .buttons_container .skip-button").show();$(".experiences-tabs-container h4").show();$(".experiences-tabs-container h5").hide()}remove_experiences_empty_div()}
function experiences_form_reset(){$("input[type=text]").val("");$("input[type=number]").val("");$("#internship-job-modal #experience_on_going").prop("checked",false);$("#internship-job-modal #experience_end_date").val("");$("#internship-job-modal #experience_end_date").prop("disabled",false);$("#internship-job-modal #experience_end_date").css("background","#ffffff");$("#internship-job-modal #experience_location").val("");$("#internship-job-modal #experience_is_work_from_home").prop("checked",false);
$("#internship-job-modal #experience_location").prop("disabled",false);$("#internship-job-modal #experience_location").css("background","#ffffff");$("#experience_description").val("");reset_profile_forms();$("#experience_end_date").datepicker("option","minDate",null);$("#experience_start_date").datepicker("option","maxDate","-1D");var validator=$("#experience-form").validate();validator.resetForm();$("#internship-job-submit").val("Save")}
function remove_experiences_empty_div(){var count_internship_element=$(".internship-container .prefilled-experiences-details-row").length;if(count_internship_element){$(".internships").show();$(".internships h4").show()}else{$(".internships").hide();$(".internships h4").hide()}var count_job_element=$(".job-container .prefilled-experiences-details-row").length;if(count_job_element){$(".jobs").show();$(".jobs h4").show()}else{$(".jobs").hide();$(".jobs h4").hide();$(".prefilled-experiences-details").css("border",
"none")}}function remove_resume_experiences_empty_div(){};$(document).ready(function(){$(document.body).on("click",".morelink",function(){$(this).hide();$(this).parent().prev().hide();$(this).prev().show();return false});call_autocomplete_location("other_experiences_location","location");toggle_skip_or_next_button_container();remove_empty_div();$("#other_experiences_location_type").change(function(){$("#other_experiences_location").removeClass("error");if($(this).is(":checked")){removeError("#other_experiences_location-error");$("#other_experiences_location").val("Online");
$("#other_experiences_location").prop("disabled",true);$("#other_experiences_location").css("background","#f6f6f6")}else{$("#other_experiences_location").val("");$("#other_experiences_location").prop("disabled",false);$("#other_experiences_location").css("background","#ffffff")}});call_autocomplete("other_experiences_organization","experience_organization");$("#other_experiences_organization").autocomplete("option","appendTo","#training-form");$("#other_experiences_organization").autocomplete({focus:function(event,
ui){this.value=ui.item.label}});call_autocomplete("other_experiences_course","training");$("#other_experiences_course").autocomplete("option","appendTo","#training-form");$("#other_experiences_course").autocomplete({focus:function(event,ui){this.value=ui.item.label}});$(document.body).on("keypress","#other_experiences_por_description",function(){if($("#other_experiences_por_description").val().length>250)$("#por-form").validate().element("#other_experiences_por_description")});$(document.body).on("keypress",
"#other_experiences_training_description",function(){if($("#other_experiences_training_description").val().length>700)$("#training-form").validate().element("#other_experiences_training_description")});$(document.body).on("keypress","#other_experiences_project_description",function(){if($("#other_experiences_project_description").val().length>250)$("#project-form").validate().element("#other_experiences_project_description")});$(document.body).on("click",".other_experiences_edit",function(){reset_other_experiences_form();
var experience_type=$(this).parent().attr("experience_type");var experience_id=$(this).parent().attr("experience_id");if(experience_type=="position_of_responsibility")populate_por_form(experience_type,experience_id);else if(experience_type=="project")populate_project_form(experience_id);else if(experience_type=="training")populate_training_form(experience_id)});$(document.body).on("change","#other_experiences_is_on_going",function(){if($(this).is(":checked")){$("#other_experiences_end_date-error").hide();
$("#other_experiences_end_date").prop("disabled",true);$("#other_experiences_end_date").val("Present");$("#other_experiences_end_date").css("background","#f6f6f6")}else{$("#other_experiences_end_date").prop("disabled",false);$("#other_experiences_end_date").val("");$("#other_experiences_end_date").css("background","#FFFFFF")}});$(document.body).on("change","#other_experiences_project_is_on_going",function(){if($(this).is(":checked")){$("#end_date_to_send-error").hide();$("#other_experiences_project_end_date").css("background",
"#f6f6f6");$("#other_experiences_project_end_date-error").hide();$("#other_experiences_project_end_date").prop("disabled",true);$("#other_experiences_project_end_date").val("Present");$("#end_date_to_send").val("")}else{$("#other_experiences_project_end_date").css("background","#FFFFFF");$("#other_experiences_project_end_date").prop("disabled",false);$("#other_experiences_project_end_date").val("");$("#other_experiences_project_end_date").removeClass("valid")}});make_field_readonly("#other_experiences_start_date");
make_field_readonly("#other_experiences_end_date");$("#other_experiences_start_date").datepicker({dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,maxDate:"-1D",beforeShow:function(e,t){$(".ui-datepicker").addClass("show_calendardates");$(".ui-datepicker").removeClass("hide_calendardates")},onSelect:function(selectedDate){if(!$("#training-form #other_experiences_is_on_going").is(":checked"))$("#other_experiences_end_date").datepicker("option","minDate",selectedDate);$(this).focusout()}}).on("change",
function(){$(this).focus()});$("#other_experiences_end_date").datepicker({dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,maxDate:"+0D",beforeShow:function(e,t){$(".ui-datepicker").addClass("show_calendardates");$(".ui-datepicker").removeClass("hide_calendardates")},onSelect:function(selectedDate){$("#other_experiences_start_date").datepicker("option","maxDate",selectedDate);$(this).focusout()}}).on("change",function(){$(this).focus()});make_field_readonly("#other_experiences_project_start_date");
make_field_readonly("#other_experiences_project_end_date");$.fn.modal.Constructor.prototype.enforceFocus=function(){};$("#other_experiences_project_start_date").datepicker({dateFormat:"yy-mm",changeMonth:true,changeYear:true,showButtonPanel:true,maxDate:"-1D",beforeShow:function(e,t){$(".ui-datepicker").addClass("hide_calendardates");$(".ui-datepicker").removeClass("show_calendardates")},onSelect:function(selectedDate){if(!$("#project-form #other_experiences_project_is_on_going").is(":checked"));
},onClose:function(dateText,inst){var month=$("#ui-datepicker-div .ui-datepicker-month :selected").val();var year=$("#ui-datepicker-div .ui-datepicker-year :selected").val();var selectedDate=new Date(year,month,1);$(this).datepicker("setDate",selectedDate);var tempStartDate=$("#other_experiences_project_end_date").val();$("#other_experiences_project_end_date").datepicker("option","minDate",selectedDate);$("#other_experiences_project_end_date").val(tempStartDate);month=parseInt(month)+1;if(month<10)month=
"0"+month;var startDate=year+"-"+month+"-01";$("#start_date_to_send").val(startDate);removeError("#start_date_to_send-error");$("#start_date_to_send-error").closest("div").addClass("has-success");$("#start_date_to_send-error").closest("div").removeClass("has-error");$(this).focusout()}}).on("change",function(){$(this).focus()});$("#other_experiences_project_end_date").datepicker({dateFormat:"yy-mm",changeMonth:true,changeYear:true,showButtonPanel:true,maxDate:"+0D",beforeShow:function(e,t){$(".ui-datepicker").addClass("hide_calendardates");
$(".ui-datepicker").removeClass("show_calendardates")},onSelect:function(selectedDate){},onClose:function(dateText,inst){var month=$("#ui-datepicker-div .ui-datepicker-month :selected").val();var year=$("#ui-datepicker-div .ui-datepicker-year :selected").val();var selectedDate=new Date(year,month,1);$(this).datepicker("setDate",selectedDate);var tempEndDate=$("#other_experiences_project_start_date").val();$("#other_experiences_project_start_date").datepicker("option","maxDate",selectedDate);$("#other_experiences_project_start_date").val(tempEndDate);
month=parseInt(month)+1;if(month<10)month="0"+month;var endDate=year+"-"+month+"-01";$("#end_date_to_send").val(endDate);removeError("#end_date_to_send-error");$("#end_date_to_send-error").closest("div").addClass("has-success");$("#end_date_to_send-error").closest("div").removeClass("has-error");$(this).focusout()}}).on("change",function(){$(this).focus()});$(document.body).on("click",".other_experiences_delete",function(){var result=confirm("Are you sure you want to delete?");if(result===true){var url=
"/student_other_experience/delete_student_other_experience";var experience_id=$(this).parent().attr("experience_id");var experience_type=$(this).parent().attr("experience_type");var csrfName=$("#csrf").attr("name");var csrfValue=$("#csrf").attr("value");var dataString={};dataString["id"]=experience_id;dataString["type"]=experience_type;dataString[csrfName]=csrfValue;NProgress.start();$(".loading_image").show();var data=dataString;$.ajax(url,{type:"POST",success:other_delete_experience_success,data:data})}return false});
$(document.body).on("click",".other-experiences-tabs",function(){reset_other_experiences_form()});$(document.body).on("click","#project-resume",function(){reset_other_experiences_form()});$(document.body).on("click","#training-resume",function(){reset_other_experiences_form()});$(document.body).on("click","#por-resume",function(){reset_other_experiences_form()});$("#por-form").validate({onfocusout:function(element){this.element(element)},rules:{description:{required:true,maxlength:250}},errorPlacement:function(label,
element){label.insertAfter(element)},highlight:function(label){$(label).parent().addClass("has-error");$(label).parent().removeClass("has-success");$(label).closest("input").addClass("error");$(label).closest("input").removeClass("valid")},success:function(label){$(label).parent().addClass("has-success");$(label).parent().removeClass("has-error");$(label).closest("input").addClass("valid");$(label).closest("input").removeClass("error")},submitHandler:function(){var data=$("#por-form").serialize();
var url="/student_other_experience/add_student_other_experience";if($("#por-submit").val()=="Update")url="/student_other_experience/update_student_other_experience";NProgress.start();$(".loading_image").show();$.ajax(url,{data:data,success:other_experience_add_success,error:onError,type:"POST"});return false}});$("#training-form").validate({onfocusout:function(element){this.element(element)},rules:{course:{required:true,maxlength:100},organization:{required:true,maxlength:100},location:{required:function(){if($("#location_type").is(":checked"))return false;
else return true},valid_city:function(){is_valid_city=false;if($("#other_experiences_location_type").is(":checked")){is_valid_city=true;return true}if($("#other_experiences_location_location_id").val()=="")return true;is_valid_city=true;return true}},start_date:{required:true},end_date:{required:function(){if($("#training-form #other_experiences_is_on_going").is(":checked"))return false;else return true}},description:{maxlength:700}},messages:{location:{required:"Please also select that location from the drop-down"}},
errorPlacement:function(label,element){label.insertAfter(element)},highlight:function(label){$(label).parent().addClass("has-error");$(label).parent().removeClass("has-success");$(label).closest("input").addClass("error");$(label).closest("input").removeClass("valid")},success:function(label){$(label).parent().addClass("has-success");$(label).parent().removeClass("has-error");$(label).closest("input").addClass("valid");$(label).closest("input").removeClass("error")},submitHandler:function(){$("#other_experiences_location_type").val($("#other_experiences_location_type").prop("checked")?
1:0);$("#training-form #other_experiences_is_on_going").val($("#training-form #other_experiences_is_on_going").prop("checked")?1:0);var data=$("#training-form").serialize();var url="";url="/student_other_experience/add_student_other_experience";if($("#training-submit").val()=="Update")url="/student_other_experience/update_student_other_experience";NProgress.start();$(".loading_image").show();$.ajax(url,{data:data,success:other_experience_add_success,error:onError,type:"POST"});return false}});$("#project-form").validate({ignore:"",
onfocusout:function(element){this.element(element)},rules:{title:{required:true,maxlength:100},start_date:{required:true},end_date:{required:function(){if($("#other_experiences_project_is_on_going").is(":checked"))return false;else return true}},description:{maxlength:250},project_link:{url:true,maxlength:100}},errorPlacement:function(label,element){label.insertAfter(element)},highlight:function(label){$(label).parent().addClass("has-error");$(label).parent().removeClass("has-success");$(label).closest("input").addClass("error");
$(label).closest("input").removeClass("valid")},success:function(label){$(label).parent().addClass("has-success");$(label).parent().removeClass("has-error");$(label).closest("input").addClass("valid");$(label).closest("input").removeClass("error")},submitHandler:function(){$("#other_experiences_project_is_on_going").val($("#other_experiences_project_is_on_going").prop("checked")?1:0);var data=$("#project-form").serialize();var url="";url="/student_other_experience/add_student_other_experience";if($("#project-submit").val()==
"Update")url="/student_other_experience/update_student_other_experience";NProgress.start();$(".loading_image").show();$.ajax(url,{data:data,success:other_experience_add_success,error:onError,type:"POST"});return false}})});
var other_experience_add_success=function(data){try{NProgress.done();if(data.success){if(data.type=="position_of_responsibility")$(".position-of-responsibility-container").html(data.htmlResponse);else if(data.type=="training")$(".training-container").html(data.htmlResponse);else if(data.type=="project")$(".project-container").html(data.htmlResponse);$(".other-experiences-form-modal").modal("hide");if(data.source=="add")success_notification("Successfully Added");else success_notification("Successfully Updated");
reset_other_experiences_form();remove_empty_div()}else{if(data.errorThrown.validationError){var form_id="";if(data.type=="project")form_id="#project-form";else if(data.type=="position_of_responsibility")form_id="#por-form";else if(data.type=="training")form_id="#training-form";throw_validation_error(data.errorThrown.validationError,form_id);return}failure_notification(data.errorThrown)}}catch(e){throw_error(e);NProgress.done();$(".loading_image").hide()}toggle_skip_or_next_button_container()};
var other_delete_experience_success=function(data){try{NProgress.done();if(data.success===true){var id=data.id;$("#"+data.type+"_container_"+id).remove();success_notification("Successfully Deleted");remove_empty_div()}else failure_notification(data.errorThrown)}catch(e){throw_error(e);NProgress.done();$(".loading_image").hide()}toggle_skip_or_next_button_container()};
function toggle_skip_or_next_button_container(){var other_experiences_element_count=$(".prefilled-other-experiences-details-row").length;if(other_experiences_element_count){student_navigation_popover("experiences",true);$(".other-experiences-tabs-container .buttons_container .next-button").show();$(".other-experiences-tabs-container .buttons_container .skip-button").hide();$(".prefilled-other-experiences-details-container h4").show();$(".other-experiences-tabs-container h4").hide();$(".other-experiences-tabs-container h5").show()}else{student_navigation_popover("experiences",
false);$(".other-experiences-tabs-container .buttons_container .next-button").hide();$(".other-experiences-tabs-container .buttons_container .skip-button").show();$(".prefilled-other-experiences-details-container h4").hide();$(".other-experiences-tabs-container h4").show();$(".other-experiences-tabs-container h5").hide()}}
function populate_por_form(experience_type,experience_id){var rawHtml=$("#"+experience_type+"_description_"+experience_id).html();$("#por-form #other_experiences_por_description").val(br2nl(rawHtml.trim()));$("#por-form #position-of-responsibility-id").val(experience_id);$("#por-submit").val("Update")}
function populate_project_form(experience_id){var project_title=$("#project_title_"+experience_id).val();var project_link=$("#project_project_link_"+experience_id).val();var project_description=$("#project_description_"+experience_id).val();var project_is_on_going=$("#project_is_on_going_"+experience_id).val();var project_start_date=$("#project_start_date_"+experience_id).val();var project_end_date=$("#project_end_date_"+experience_id).val();if(project_is_on_going==1){$("#project-modal #other_experiences_project_is_on_going").prop("checked",
true);$("#project-modal #other_experiences_project_end_date").val("Present");$("#project-modal #other_experiences_project_end_date").prop("disabled",true);$("#project-modal #other_experiences_project_end_date").css("background","#f6f6f6")}else{$("#project-modal #other_experiences_project_is_on_going").prop("checked",false);$("#project-modal #other_experiences_project_end_date").val(project_end_date);$("#project-modal #end_date_to_send").val(project_end_date+"-01");$("#project-modal #other_experiences_project_end_date").prop("disabled",
false);$("#project-modal #other_experiences_project_end_date").css("background","#ffffff")}$("#project-modal #project_id").val(experience_id);$("#project-modal #other_experiences_title").val(project_title);$("#project-modal #other_experiences_project_start_date").val(project_start_date);$("#project-modal #start_date_to_send").val(project_start_date+"-01");$("#project-modal #other_experiences_project_description").val(project_description);$("#project-modal #other_experiences_project_link").val(project_link);
$("#project-submit").val("Update")}
function populate_training_form(experience_id){var training_title=$("#training_training_"+experience_id).val();var training_organization=$("#training_experience_organization_"+experience_id).val();var training_is_work_from_home=$("#training_is_work_from_home_"+experience_id).val();var training_description=$("#training_description_"+experience_id).val();var training_is_on_going=$("#training_is_on_going_"+experience_id).val();var training_start_date=$("#training_start_date_"+experience_id).val();var training_end_date=
$("#training_end_date_"+experience_id).val();var training_display_location=$("#training_display_location_"+experience_id).val();var training_location_location_id=$("#training_location_location_id_"+experience_id).val();if(training_is_on_going==1){$("#training-modal #other_experiences_is_on_going").prop("checked",true);$("#training-modal #other_experiences_end_date").val("Present");$("#training-modal #other_experiences_end_date").prop("disabled",true);$("#training-modal #other_experiences_end_date").css("background",
"#f6f6f6")}else{$("#training-modal #other_experiences_is_on_going").prop("checked",false);$("#training-modal #other_experiences_end_date").val(training_end_date);$("#training-modal #other_experiences_end_date").prop("disabled",false);$("#training-modal #other_experiences_end_date").css("background","#ffffff")}if(training_is_work_from_home==1){$("#training-modal #other_experiences_location_type").prop("checked",true);$("#training-modal #other_experiences_location").val("Online");$("#other_experiences_location").prop("disabled",
true)}else{$("#training-modal #other_experiences_location_type").prop("checked",false);$("#training-modal #other_experiences_location").val(training_display_location);$("#other_experiences_location").prop("disabled",false)}$("#training-modal #training_id").val(experience_id);$("#training-modal #other_experiences_organization").val(training_organization);$("#training-modal #other_experiences_course").val(training_title);$("#training-modal #other_experiences_location_location_id").val(training_location_location_id);
$("#training-modal #other_experiences_start_date").val(training_start_date);$("#training-modal #other_experiences_training_description").val(training_description);$("#training-submit").val("Update")}
function remove_empty_div(){var por_element_count=$(".position_of_responsibility .prefilled-other-experiences-details-row").length;if(por_element_count)$(".position_of_responsibility").show();else $(".position_of_responsibility").hide();var training_element_count=$(".training .prefilled-other-experiences-details-row").length;if(training_element_count)$(".training").show();else $(".training").hide();var project_element_count=$(".project .prefilled-other-experiences-details-row").length;if(project_element_count){$(".training").css("border-bottom",
"1px solid #e6e6e6");$(".project").show()}else{$(".training").css("border","none");$(".project").hide()}$(".project").css("border","none");if(!training_element_count&&!project_element_count)$(".position_of_responsibility").css("border","none");else $(".position_of_responsibility").css("border-bottom","1px solid #e6e6e6")}
function remove_resume_empty_div(){var resume_por_element_count=$(".resume-position-of-responsibility .detail-row").length;if(resume_por_element_count)$(".resume-position-of-responsibility").show();else $(".resume-position-of-responsibility").hide();var resume_training_element_count=$(".resume-training .detail-row").length;if(resume_training_element_count)$(".resume-training").show();else $(".resume-training").hide();var resume_project_element_count=$(".resume-project .detail-row").length;if(resume_project_element_count)$(".resume-project").show();
else $(".resume-project").hide()}
function reset_other_experiences_form(){$("input[type=text]").val("");$("input[type=number]").val("");$("#training-form #other_experiences_is_on_going").prop("checked",false);$("#project-form #other_experiences_project_is_on_going").prop("checked",false);$("#other_experiences_end_date").val("");$("#other_experiences_end_date").prop("disabled",false);$("#other_experiences_end_date").css("background","#ffffff");$("#other_experiences_end_date").datepicker("option","minDate",null);$("#other_experiences_start_date").datepicker("option",
"maxDate","-1D");$("#other_experiences_project_end_date").val("");$("#other_experiences_project_end_date").prop("disabled",false);$("#other_experiences_project_end_date").css("background","#ffffff");$("#other_experiences_project_end_date").datepicker("option","minDate",null);$("#other_experiences_project_start_date").datepicker("option","maxDate","-1D");$("#start_date_to_send").val("");$("#end_date_to_send").val("");$("#other_experiences_location").val("");$("#other_experiences_location_type").prop("checked",
false);$("#other_experiences_location").prop("disabled",false);$("#other_experiences_training_description").val("");$("#other_experiences_project_description").val("");$("#other_experiences_por_description").val("");reset_profile_forms();var porValidator=$("#por-form").validate();$("#por-submit").val("Save");porValidator.resetForm();var trainingValidator=$("#training-form").validate();$("#training-submit").val("Save");trainingValidator.resetForm();var projectValidator=$("#project-form").validate();
$("#project-submit").val("Save");projectValidator.resetForm()};$(document).ready(function(){toggle_additional_details_next_skip_buttons();$("#edit_form_container").hide();$(".additional_edit_cancel").hide();reset_additional_details_form();$("#additional-detail-submit").hide();$(document.body).on("click",".additional_edit",function(){reset_additional_details_form();var additional_detail_id=$(this).parent().attr("additional_detail_id");var rawDescription=$("#additional_detail_"+additional_detail_id+"_description").html();var description_data=br2nl(rawDescription.trim());
$("#additional-detail-submit").show();$("#additional-detail-submit").val("Update");if($("#resume_max_width_container")[0]){$("#additional_detail_description").val(description_data);$("#additional_detail_id").val(additional_detail_id);$(".additional_edit").attr("data-toggle","modal");$(".additional_edit").attr("data-target","#additional-modal");$(".additional_edit").attr("id","additional-form-modal");$("#additional-detail-submit").show()}else{if($("#additional-form-container").css("display")!="none"){var previous_additional_detail_id=
$("#additional_detail_id").val();$(".prefilled-additional-details-right-cell").show();$("#additional-form-container").hide();$(".additional_edit_cancel").attr("id",additional_detail_id)}$("#additional_detail_"+additional_detail_id).after($("#additional-form-container"));$("#additional_detail_id").val(additional_detail_id);$("#additional_detail_description").val(description_data);$("#additional-form-container").show();$(".additional_edit_cancel").show();$(this).parent().hide()}});$(document.body).on("keyup",
"#additional_detail_description",function(){if($("#additional_detail_description").val().length==0){if($("#additional-detail-submit").val()=="Save"&&!$("#resume_max_width_container")[0])$("#additional-detail-submit").hide();$("#additional_detail_description").val("");$("#additional_detail_description-error").hide();reset_profile_forms()}else{$("#additional-detail-submit").show();if($("#additional_detail_description").val().length>250)$("#additional_details").validate().element("#additional_detail_description")}});
$(document.body).on("click",".additional_edit_cancel",function(){additional_edit_cancel()});$("#additional-form-modal").click(function(){$("#additional-detail-submit").show();reset_additional_details_form()});$(document.body).on("click",".additional_delete",function(){var result=confirm("Are you sure you want to delete?");if(result===true){var url="/student/additional_details_delete";var additional_detail_id=$(this).parent().attr("additional_detail_id");var csrfName=$("#csrf").attr("name");var csrfValue=
$("#csrf").attr("value");var dataString={};dataString["id"]=additional_detail_id;dataString[csrfName]=csrfValue;NProgress.start();$(".loading_image").show();var data=dataString;$.ajax(url,{type:"POST",success:additional_detail_delete_success,data:data})}return false});$("#additional_details").submit(function(e){e.preventDefault()}).validate({rules:{description:{required:true,maxlength:250}},errorPlacement:function(label,element){label.insertAfter(element)},highlight:function(label){$(label).closest(".form-group").addClass("has-error");
$(label).closest(".form-group").removeClass("has-success");$(label).closest("input").addClass("error");$(label).closest("input").removeClass("valid")},success:function(label){$(label).closest(".form-group").addClass("has-success");$(label).closest(".form-group").removeClass("has-error");$(label).closest("input").addClass("valid");$(label).closest("input").removeClass("error")},submitHandler:function(){var data=$("#additional_details").serialize();var url="/student/additional_details_submit";if($("#additional-detail-submit").val()==
"Update")url="/student/additional_details_update";NProgress.start();$(".loading_image").show();$.ajax(url,{data:data,success:additional_detail_update_success,error:onError,type:"POST"});return false}})});
function toggle_additional_details_next_skip_buttons(){var additional_details_element_count=$("#additional-details-container .user-additional-detail").length;if(additional_details_element_count){student_navigation_popover("additional_details",true);$(".resume-additional-detail .additional-detail-example").hide();$("#additional-details-container .next").show();$("#additional-details-container .skip").hide()}else{student_navigation_popover("additional_details",false);if(!$("#resume_max_width_container")[0]);
$("#additional-details-container .next").hide();$("#additional-details-container .skip").show()}if(!$("#resume_max_width_container")[0])$(".additional-detail-example").show()}
function additional_edit_cancel(){if($("#additional-details-container").length==1){$(".additional_edit_cancel").hide();$("#additional-details-container .prefilled-additional-details-container").after($("#additional-form-container"));$("#additional-form-container #additional_detail_description").val("");$("#additional-form-container #additional-detail-submit").val("Save");$("#additional-form-container").show();reset_additional_details_form()}$("#additional-details-container .prefilled-additional-details-right-cell").show()}
var additional_detail_update_success=function(data){try{NProgress.done();if(!data.success)if(data.errorThrown.validationError){throw_validation_error(data.errorThrown.validationError,"#additional_details");$("#additional_detail_description-error").prev("textarea").addClass("error");$("#additional_detail_description-error").prev("textarea").removeClass("valid")}else failure_notification(data.errorThrown);else{$("#additional-modal").modal("hide");if(data.source=="add"){$(".prefilled-additional-details").html(data.htmlResponse);
success_notification("Successfully Added");$("#additional_detail_description").val("")}else{$("#additional_detail_"+data.id+"_description").html(nl2br(data.description));success_notification("Successfully Updated");additional_edit_cancel()}reset_additional_details_form()}}catch(e){throw_error(e);NProgress.done();$(".loading_image").hide()}};
var additional_detail_delete_success=function(data){try{NProgress.done();if(data.success===true){$("#additional_detail_"+data.id).remove();success_notification("Successfully Deleted")}else failure_notification(data.errorThrown)}catch(e){throw_error(e);NProgress.done();$(".loading_image").hide()}reset_additional_details_form()};
var reset_additional_details_form=function(){toggle_additional_details_next_skip_buttons();$("#additional_detail_description").val("");reset_profile_forms();$("#additional_detail_description-error").hide();$("#additional-form-container").show();$("#additional-detail-submit").val("Save");if(!$("#resume_max_width_container")[0])$("#additional-detail-submit").hide()};
function remove_additional_detail_empty_div(){var count_resume_additional_detail_element=$(".resume-additional-detail .detail-row span").length;if(count_resume_additional_detail_element)$(".resume-additional-detail").show();else $(".resume-additional-detail").hide()};var skill_container;var selected_skill;
$(document).ready(function(){$(".add-skills-rating-container").hide();$(".rating-value").attr("readonly","true");$(".skills_edit_cancel").hide();reset_skills_form();call_autocomplete("skill","skill");$("#skill").autocomplete({focus:function(event,ui){var val=ui.item.label;if(val!=="No match found")this.value=val;else this.value=""},select:function(event,ui){if($.inArray(ui.item.value,prefilled_skills_name)==-1)if(ui.item.value!="No match found"){$(".add-skills-rating-container").show();$(".add-skills-rating-container #rating_question").html("How would you rate yourself on this skill?");
selected_skill=$("#skill").val()}else{ui.item.value="";$("#skill").val("");failure_notification("Invalid skill; Please choose a skill from the dropdown");$(".add-skills-rating-container").hide()}else{ui.item.value="";$("#skill").val("");failure_notification("This skill is already added in your profile");$(".add-skills-rating-container").hide()}}});$("#skill-form-modal").click(function(){$("#skill-form").after($(".add-skills-rating-container"));reset_resume_skills_form()});$("#skill-modal").on("shown.bs.modal",
function(){$("#skill").focus()});$("#skill").keyup(function(){if($("#skill").val()==""||$("#skill").val()!=selected_skill)$(".add-skills-rating-container").hide()});$(document.body).on("click",".rating-value",function(){this.blur();if(student_profile_view=="skills"){var application_page_path="/application/form/";var add_skill_from;if(window.location.pathname.indexOf(application_page_path)==-1)add_skill_from="student_profile_form";else add_skill_from="application_form";if($(this).closest(".add-skills-rating-container").find("#skill_mode").val()==
"add"){var skill_name=$("#skill").val();var skill_level=$(this).val();if(skill_name&&skill_level){NProgress.start();$(".loading_image").show();var csrfName=$("#csrf").attr("name");var csrfValue=$("#csrf").attr("value");var dataString={};dataString["skill_name"]=skill_name;dataString["skill_level"]=skill_level;dataString["add_skill_from"]=add_skill_from;dataString[csrfName]=csrfValue;var url="/student/skills_submit";$.ajax(url,{type:"POST",success:skill_submit_success,data:dataString})}}else{$(this).closest(".popover").popover("destroy");
var student_skill_id=$(this).closest(".add-skills-rating-container").attr("student_skill_id");var skill_level=$(this).val();NProgress.start();$(".loading_image").show();var data={"student_skill_id":student_skill_id,"skill_level":skill_level};var csrfName=$("#csrf").attr("name");var csrfValue=$("#csrf").attr("value");var dataString={};dataString["student_skill_id"]=student_skill_id;dataString["skill_level"]=skill_level;dataString[csrfName]=csrfValue;var url="/student/skills_update";$.ajax(url,{type:"POST",
success:skill_submit_success,data:dataString})}}else if($(".add-skills-rating-container #skill_action").val()=="add"){var skill_name=$("#skill").val();var skill_level=$(this).val();if(skill_name&&skill_level){NProgress.start();$(".loading_image").show();var csrfName=$("#csrf").attr("name");var csrfValue=$("#csrf").attr("value");var dataString={};dataString["skill_name"]=skill_name;dataString["add_skill_from"]="student_profile_form";dataString["skill_level"]=skill_level;dataString[csrfName]=csrfValue;
var url="/student/skills_submit";$.ajax(url,{type:"POST",success:skill_submit_success,data:dataString})}}else if($(".add-skills-rating-container #skill_action").val()=="update"){var student_skill_id=$(".add-skills-rating-container #skill_id").val();var skill_level=$(this).val();NProgress.start();$(".loading_image").show();var data={"student_skill_id":student_skill_id,"skill_level":skill_level};var csrfName=$("#csrf").attr("name");var csrfValue=$("#csrf").attr("value");var dataString={};dataString["student_skill_id"]=
student_skill_id;dataString["skill_level"]=skill_level;dataString[csrfName]=csrfValue;var url="/student/skills_update";$.ajax(url,{type:"POST",success:skill_submit_success,data:dataString})}});$(document.body).on("click",".popover .popover-title .close",function(){skills_edit_cancel();$(this).closest(".popover").popover("destroy")});$(document.body).on("click",".skills_edit",function(){if(student_profile_view=="skills"){$("#skill_mode").val("edit");var $prefilled_skills_details_row=$(this).closest(".prefilled-skills-details-row");
var student_skill_id=$prefilled_skills_details_row.attr("student_skill_id");var $add_skills_rating_container_clone=$(".add-skills-rating-container").clone();$add_skills_rating_container_clone.show();$add_skills_rating_container_clone.attr("student_skill_id",student_skill_id);$prefilled_skills_details_row.popover({container:window.innerWidth<768?"#skills-container":"body",placement:"bottom",title:'<span class="info"><strong>How would you rate yourself on this skill?</strong></span><button type="button" class="close">&times;</button>',
html:true,content:$add_skills_rating_container_clone[0].outerHTML});$prefilled_skills_details_row.popover("show");var skill_name=$("#student_skill_"+student_skill_id+" #student_skill_name").val()}else{$(".skills_edit").attr("data-toggle","modal");$(".skills_edit").attr("data-target","#skill-modal");$(".skills_edit").attr("id","skill-form-modal");var skill_id=$(this).closest(".detail-row").attr("student_skill_id");var skill_name=$("#student_skill_"+skill_id+" #student_skill_name").val();var skill_level=
$("#student_skill_"+skill_id+" #student_skill_level").val();$("#skill-modal #skill").val(skill_name);$("#skill-modal #skill").attr("readonly",true);$("#skill-modal #skill").attr("disabled",true);$(".add-skills-rating-container #rating_question").html("How would you rate yourself on this skill?");$(".add-skills-rating-container").show();$(".add-skills-rating-container #skill_id").val(skill_id);$(".add-skills-rating-container #skill_name").val(skill_name);$(".add-skills-rating-container #skill_action").val("update")}});
$(document).on("click",function(e){$('[data-toggle="popover"],[data-original-title]').each(function(){if(!$(this).is(e.target)&&$(this).has(e.target).length===0&&$(".popover").has(e.target).length===0){skills_edit_cancel();(($(this).popover("destroy").data("bs.popover")||{}).inState||{}).click=false}})});$(document.body).on("click",".skills_delete",function(){var student_skill_id=$(this).closest(".prefilled-skills-details-row").attr("student_skill_id");var skill_name=$(this).closest(".prefilled-skills-details-row").find("input[name='student_skill_name']").val();
var index=prefilled_skills_name.indexOf(skill_name);prefilled_skills_name.splice(index,1);NProgress.start();if(student_profile_view=="skills"){skills_edit_cancel();var application_page_path="/application/form/";var delete_skill_from;if(window.location.pathname.indexOf(application_page_path)==-1)delete_skill_from="student_profile_form";else delete_skill_from="application_form";var csrfName=$("#csrf").attr("name");var csrfValue=$("#csrf").attr("value");var dataString={};dataString["student_skill_id"]=
student_skill_id;dataString["delete_skill_from"]=delete_skill_from;dataString[csrfName]=csrfValue;var url="/student/is_student_skill_used"}else{var csrfName=$("#csrf").attr("name");var csrfValue=$("#csrf").attr("value");var dataString={};dataString["student_skill_id"]=student_skill_id;dataString[csrfName]=csrfValue;var url="/student/is_student_skill_used"}$.ajax(url,{type:"POST",success:is_student_skill_used_success,data:dataString});return false});$(document.body).on("click",".skills_add",function(){$(".prefilled-skills-details-right-cell ").show();
$(this).parent().parent().hide();$(".skills_edit_cancel").show();skill_container=$(this).parent().parent().parent();var skill_name=skill_container.children("#student_skill_name").val();$(".add-skills-rating-container #rating_question").html("How would you rate yourself on this skill?");$("#skill_mode").val("add");$(".add-skills-rating-container").slideUp("slow",function(){$("#skill").val(skill_name);$("#skill").hide();skill_container.after($(".add-skills-rating-container"));$(".add-skills-rating-container").slideDown("slow",
function(){})})});$(document.body).on("click","#confirm_skill_delete_form_cancel",function(){$(".loading_image").hide();$("#confirm-skill-delete-modal").modal("hide");reset_resume_skills_form()});$(document.body).on("click","#confirm_skill_delete_form_submit",function(){$("#confirm-skill-delete-modal").modal("hide");var student_skill_id=$("#confirm-skill-delete-modal #student_skill_id").val();var delete_from_application=$("#delete_from_application").is(":checked")?"yes":"no";NProgress.start();$(".loading_image").show();
if(student_profile_view=="skills"){var application_page_path="/application/form/";var delete_skill_from;if(window.location.pathname.indexOf(application_page_path)==-1)delete_skill_from="student_profile_form";else delete_skill_from="application_form";var csrfName=$("#csrf").attr("name");var csrfValue=$("#csrf").attr("value");var dataString={};dataString["student_skill_id"]=student_skill_id;dataString["delete_from_application"]=delete_from_application;dataString["delete_skill_from"]=delete_skill_from;
dataString[csrfName]=csrfValue;var url="/student/skills_delete"}else{var csrfName=$("#csrf").attr("name");var csrfValue=$("#csrf").attr("value");var dataString={};dataString["student_skill_id"]=student_skill_id;dataString["delete_from_application"]=delete_from_application;dataString[csrfName]=csrfValue;var url="/student/skills_delete"}$.ajax(url,{type:"POST",success:skill_delete_success,data:dataString});return false});$(document.body).on("click",".recommended-skills .skill",function(){var skill_name=
$(this).text();if(prefilled_skills_name.indexOf(skill_name)===-1){$("#skill").val(skill_name);$(".add-skills-rating-container").show();$(".add-skills-rating-container #rating_question").html("How would you rate yourself on this skill?");selected_skill=$("#skill").val();if(window.innerWidth<768)goToByScroll("skill-form")}else{$("#skill").val("");failure_notification("This skill is already added in your profile");$(".add-skills-rating-container").hide()}})});
var skill_submit_success=function(data){try{NProgress.done();if(!data.success)failure_notification(data.errorThrown);else if(student_profile_view=="skills")if(data.source=="add"){if(data.add_skill_from=="application_form"){var student_skill_id=data.student_skill_id;skill_container.attr("id","student_skill_"+student_skill_id);skill_container.attr("student_skill_id",student_skill_id);$("#student_skill_"+data.student_skill_id+" .skills_edit").show();$("#student_skill_"+data.student_skill_id+" .skills_delete").show();
$("#student_skill_"+data.student_skill_id+" .skills_add").hide();$("#student_skill_"+data.student_skill_id+" .prefilled-skills-details-left-cell #skill-level").text(data.skill_level);$("#student_skill_"+data.student_skill_id+" #student_skill_id").val(data.student_skill_id);$("#student_skill_"+data.student_skill_id+" #student_skill_level").val(data.skill_level);skills_edit_cancel()}else{$(".prefilled-skills-details-container").show();$(".prefilled-skills-details").html(data.htmlResponse);$("#skill-modal").modal("hide")}$(".recommended-skills .skill").filter(function(){return $(this).text()===
data.skill_name}).remove();if($(".recommended-skills .skill").length===0)$("#recommended-skills-help-message").remove();success_notification("Successfully Added");reset_skills_form()}else{$("#student_skill_"+data.id+" .prefilled-skills-details-left-cell #skill-level").text(data.skill_level);$("#student_skill_"+data.id+" #student_skill_level").val(data.skill_level);success_notification("Successfully Updated");skills_edit_cancel()}else{$("#skill-modal").modal("hide");if(data.source=="add"){$(".resume-skill").show();
$(".skills-container").html(data.htmlResponse);success_notification("Successfully Added")}else{$("#student_skill_"+data.id+" .prefilled-skills-details-left-cell #skill-level").text(data.skill_level);success_notification("Successfully Updated")}$("#skill").val("");$(".add-skills-rating-container").hide()}$("#skill").val("");$(".add-skills-rating-container").hide()}catch(e){throw_error(e);NProgress.done();$(".loading_image").hide()}};
var is_student_skill_used_success=function(data){try{NProgress.done();if(data.success===true){$("#confirm-skill-delete-modal #student_skill_id").val(data.id);if(data.is_student_skill_used){$("#confirm-skill-delete-modal #delete-from-application-container").show();$("#delete_from_application").prop("checked",false)}else{$("#confirm-skill-delete-modal #delete-from-application-container").hide();$("#delete_from_application").prop("checked",true)}if(data.delete_skill_from=="application_form"){$("#confirm-skill-delete-modal #delete-from-application-container").hide();
$("#delete_from_application").prop("checked",true)}$("#confirm-skill-delete-modal").modal("show")}else failure_notification(data.errorThrown)}catch(e){throw_error(e);NProgress.done();$(".loading_image").hide()}};
var skill_delete_success=function(data){try{NProgress.done();if(data.success===true){if(student_profile_view=="skills")if(data.delete_skill_from=="application_form"){$("#student_skill_"+data.id).attr("student_skill_id","");$("#student_skill_"+data.id+" .skills_edit").hide();$("#student_skill_"+data.id+" .skills_delete").hide();$("#student_skill_"+data.id+" .skills_add").show();$("#student_skill_"+data.id+" .prefilled-skills-details-left-cell #skill-level").text("");$("#student_skill_"+data.id).attr("id",
"student_skill_")}else $("#student_skill_"+data.id).remove();else $("#student_skill_"+data.id).remove();success_notification("Successfully Deleted")}else failure_notification(data.errorThrown)}catch(e){throw_error(e);NProgress.done();$(".loading_image").hide()}reset_skills_form();reset_resume_skills_form()};
function skills_edit_cancel(){$("#skill_mode").val("add");if($(".add-skills-rating-container").closest("#skills-container")!=0){$("#skill").show();$(".skills_edit_cancel").hide();reset_skills_form()}else $(".rating-container").hide()}
function reset_skills_form(){$("#skill_mode").val("add");var skill_count=$(".prefilled-skills-details-row").length;var are_recommended_skills_shown=$(".recommended-skills .skill").length>0;if(!skill_count){student_navigation_popover("skills",false);$(".prefilled-skills-details-container").hide();$("#skills-container .next").hide();$("#skills-container .skip").show()}else{student_navigation_popover("skills",true);$(".prefilled-skills-details-container").show();$("#skills-container .next").show();$("#skills-container .skip").hide()}if(are_recommended_skills_shown)$("#skill").attr("placeholder",
"or add more skills here e.g. Java");else $("#skill").attr("placeholder","add skills here e.g. Java");$("#skill").focus()}
function reset_resume_skills_form(){$("#skill-modal #skill").val("");$("#skill-modal #skill").attr("readonly",false);$("#skill-modal #skill").attr("disabled",false);$(".add-skills-rating-container #rating_question").html("");$(".add-skills-rating-container #skill_id").val("");$(".add-skills-rating-container #skill_name").val("");$(".add-skills-rating-container #skill_action").val("add");$("#skill-modal #skill").attr("placeholder","Ex: Adobe Photoshop");$(".add-skills-rating-container").hide();$("#skill").focus()}
function clear_resume_skill_empty_div(){var resume_skill_element_count=$(".resume-skill .detail-row").length;if(resume_skill_element_count)$(".resume-skill").show();else $(".resume-skill").hide()};$(document).ready(function(){$("#work-modal").click(function(){$("#work_samples-submit").val("Save")});remove_work_sample_empty_div();$(document.body).on("click",".work-sample-delete",function(){var result=confirm("Are you sure you want to delete?");if(result===true){var csrfName=$("#csrf").attr("name");var csrfValue=$("#csrf").attr("value");var student_work_sample_id=$(this).attr("work-sample-id");var url="/student/work_sample_delete";var dataString={};dataString["work_sample_id"]=student_work_sample_id;
dataString[csrfName]=csrfValue;NProgress.start();$(".loading_image").show();$.ajax(url,{data:dataString,success:update_success,error:onError,type:"POST"})}});$(document.body).on("click","#work-modal",function(){$("#work_samples #blog_link").val($("#work_sample_resume_blog").val());$("#work_samples #github_profile").val($("#work_sample_resume_github").val());$("#work_samples #developer_account_link").val($("#work_sample_resume_developer_account").val());$("#work_samples #behance_portfolio_link").val($("#work_sample_resume_behance").val());
$("#work_samples #other_portfolio_link").val($("#work_sample_resume_portfolio").val())});$(document.body).on("click",".work-sample-edit",function(){var link=$(this).attr("link");var sample_type=$(this).attr("sample_type");var work_sample_id=$(this).attr("work-sample-id");var sample_label="";if(sample_type=="blog")sample_label="Blog Link:";else if(sample_type=="developer_account")sample_label="Developer Account Link:";else if(sample_type=="github")sample_label="GitHub Profile:";else if(sample_type==
"behance")sample_label="Behance Portfolio Link:";else if(sample_type=="portfolio")sample_label="Other Portfolio Link:";$("#sample_label").html(sample_label);$("#work_sample #link").val(link);$("#work_sample #sample_type").val(sample_type);$("#work_sample_id").val(work_sample_id)});$("#work_samples").submit(function(e){e.preventDefault()}).validate({onfocusout:function(element){this.element(element)},rules:{blog:{url:true,maxlength:100},github:{url:true,profile_url:"github",maxlength:100},developer_account:{url:true,
profile_url:"developer_account",maxlength:100},behance:{url:true,profile_url:"behance",maxlength:100},portfolio:{url:true,maxlength:100}},errorPlacement:function(label,element){label.insertAfter(element)},highlight:function(label){$(label).closest(".form-group").addClass("has-error");$(label).closest(".form-group").removeClass("has-success");$(label).closest("input").addClass("error");$(label).closest("input").removeClass("valid")},success:function(label){$(label).closest(".form-group").addClass("has-success");
$(label).closest(".form-group").removeClass("has-error");$(label).closest("input").addClass("valid");$(label).closest("input").removeClass("error")},submitHandler:function(){var data="";if($("#work_samples").closest(".modal-dialog").length)data=$("#work_samples").serialize()+"&referer=resume";else data=$("#work_samples").serialize();var url="";url="/student/work_samples_update";NProgress.start();$(".loading_image").show();$.ajax(url,{data:data,success:update_success,error:onError,type:"POST"});return false}});
$("#work_sample").submit(function(e){e.preventDefault()}).validate({onfocusout:function(element){this.element(element)},rules:{link:{url:true,profile_url:function(){return $("#sample_type").val()},maxlength:100},sample_type:{required:true}},errorPlacement:function(label,element){label.insertAfter(element)},highlight:function(label){$(label).closest(".form-group").addClass("has-error");$(label).closest(".form-group").removeClass("has-success");$(label).closest("input").addClass("error");$(label).closest("input").removeClass("valid")},
success:function(label){$(label).closest(".form-group").addClass("has-success");$(label).closest(".form-group").removeClass("has-error");$(label).closest("input").addClass("valid");$(label).closest("input").removeClass("error")},submitHandler:function(){var data=$("#work_sample").serialize();var url="/student/work_sample_update";NProgress.start();$(".loading_image").show();$.ajax(url,{data:data,success:update_success,error:onError,type:"POST"});return false}})});
var update_success=function(data){try{NProgress.done();if(!data.success)throw_error(data.errorThrown);else{if(data.referer=="resume"){$(".work-samples-form-modal").modal("hide");$(".work-sample-container").html(data.htmlResponse);if(data.mode=="update")success_notification("Successfully Updated");else if(data.mode=="delete")success_notification("Successfully Deleted");else success_notification("Successfully Added")}else window.location="/student/additional_details";remove_work_sample_empty_div()}}catch(e){throw_error(e);
NProgress.done();$(".loading_image").hide()}};function remove_work_sample_empty_div(){};$(document).ready(function(){$(".education_incomplete").click(function(e){e.preventDefault();$.ajax("/student/is_education_detail_filled",{success:is_education_detail_filled_success,error:onError,type:"POST"})});updateStudentNavigationTabs("resume");$("#work-samples-submit").val("Save");$(".skill-previous-button").hide();$(".additional-detail-example").hide();$(document.body).on("click","#personal_details_edit",function(){$("#personal_details #first_name_container").show();$("#personal_details #last_name_container").show();
$("#personal_details #email_container").show();$("#personal_details #personal-detail-submit").val("Update");$("#personal_details #salutation").val($("#personal_details_resume_salutation").val());$("#personal_details #first_name").val($("#personal_details_resume_first_name").val());$("#personal_details #last_name").val($("#personal_details_resume_last_name").val());$("#personal_details #email").val($("#personal_details_resume_email").val());$("#personal_details #country_code").val($("#personal_details_resume_country_code").val());
$("#personal_details #phone_primary").val($("#personal_details_resume_phone_primary").val());$("#personal_details #current_city").val($("#personal_details_resume_current_city").val());$("#personal_details #second_city_of_residence").val($("#personal_details_resume_second_city_of_residence").val());$("#personal_details #current_city_location_id").val($("#personal_details_resume_current_city_location_id").val());$("#personal_details #second_city_of_residence_location_id").val($("#personal_details_resume_second_city_of_residence_location_id").val())})});
var is_education_detail_filled_success=function(data){try{NProgress.done();$(".loading_image").hide();if(!data.success);else if(data.is_education_details_complete)window.location.href=url;else throw_error("You must at least add your education detail(s) before you can apply to internships.")}catch(e){throw_error(e);NProgress.done();$(".loading_image").hide()}};/*
 jQuery Migrate - v1.2.1 - 2013-05-08
 https://github.com/jquery/jquery-migrate
 Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT
*/
(function(jQuery,window,undefined){var warnedAbout={};jQuery.migrateWarnings=[];if(!jQuery.migrateMute&&window.console&&window.console.log)window.console.log("JQMIGRATE: Logging is active");if(jQuery.migrateTrace===undefined)jQuery.migrateTrace=true;jQuery.migrateReset=function(){warnedAbout={};jQuery.migrateWarnings.length=0};function migrateWarn(msg){var console=window.console;if(!warnedAbout[msg]){warnedAbout[msg]=true;jQuery.migrateWarnings.push(msg);if(console&&console.warn&&!jQuery.migrateMute)if(jQuery.migrateTrace&&
console.trace)console.trace()}}function migrateWarnProp(obj,prop,value,msg){if(Object.defineProperty)try{Object.defineProperty(obj,prop,{configurable:true,enumerable:true,get:function(){migrateWarn(msg);return value},set:function(newValue){migrateWarn(msg);value=newValue}});return}catch(err){}jQuery._definePropertyBroken=true;obj[prop]=value}if(document.compatMode==="BackCompat")migrateWarn("jQuery is not compatible with Quirks Mode");var attrFn=jQuery("<input/>",{size:1}).attr("size")&&jQuery.attrFn,
oldAttr=jQuery.attr,valueAttrGet=jQuery.attrHooks.value&&jQuery.attrHooks.value.get||function(){return null},valueAttrSet=jQuery.attrHooks.value&&jQuery.attrHooks.value.set||function(){return undefined},rnoType=/^(?:input|button)$/i,rnoAttrNodeType=/^[238]$/,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ruseDefault=/^(?:checked|selected)$/i;migrateWarnProp(jQuery,"attrFn",attrFn||{},"jQuery.attrFn is deprecated");
jQuery.attr=function(elem,name,value,pass){var lowerName=name.toLowerCase(),nType=elem&&elem.nodeType;if(pass){if(oldAttr.length<4)migrateWarn("jQuery.fn.attr( props, pass ) is deprecated");if(elem&&!rnoAttrNodeType.test(nType)&&(attrFn?name in attrFn:jQuery.isFunction(jQuery.fn[name])))return jQuery(elem)[name](value)}if(name==="type"&&value!==undefined&&rnoType.test(elem.nodeName)&&elem.parentNode)migrateWarn("Can't change the 'type' of an input or button in IE 6/7/8");if(!jQuery.attrHooks[lowerName]&&
rboolean.test(lowerName)){jQuery.attrHooks[lowerName]={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===true||typeof property!=="boolean"&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==false?name.toLowerCase():undefined},set:function(elem,value,name){var propName;if(value===false)jQuery.removeAttr(elem,name);else{propName=jQuery.propFix[name]||name;if(propName in elem)elem[propName]=true;elem.setAttribute(name,name.toLowerCase())}return name}};
if(ruseDefault.test(lowerName))migrateWarn("jQuery.fn.attr('"+lowerName+"') may use property instead of attribute")}return oldAttr.call(jQuery,elem,name,value)};jQuery.attrHooks.value={get:function(elem,name){var nodeName=(elem.nodeName||"").toLowerCase();if(nodeName==="button")return valueAttrGet.apply(this,arguments);if(nodeName!=="input"&&nodeName!=="option")migrateWarn("jQuery.fn.attr('value') no longer gets properties");return name in elem?elem.value:null},set:function(elem,value){var nodeName=
(elem.nodeName||"").toLowerCase();if(nodeName==="button")return valueAttrSet.apply(this,arguments);if(nodeName!=="input"&&nodeName!=="option")migrateWarn("jQuery.fn.attr('value', val) no longer sets properties");elem.value=value}};var matched,browser,oldInit=jQuery.fn.init,oldParseJSON=jQuery.parseJSON,rquickExpr=/^([^<]*)(<[\w\W]+>)([^>]*)$/;jQuery.fn.init=function(selector,context,rootjQuery){var match;if(selector&&typeof selector==="string"&&!jQuery.isPlainObject(context)&&(match=rquickExpr.exec(jQuery.trim(selector)))&&
match[0]){if(selector.charAt(0)!=="<")migrateWarn("$(html) HTML strings must start with '<' character");if(match[3])migrateWarn("$(html) HTML text after last tag is ignored");if(match[0].charAt(0)==="#"){migrateWarn("HTML string cannot start with a '#' character");jQuery.error("JQMIGRATE: Invalid selector string (XSS)")}if(context&&context.context)context=context.context;if(jQuery.parseHTML)return oldInit.call(this,jQuery.parseHTML(match[2],context,true),context,rootjQuery)}return oldInit.apply(this,
arguments)};jQuery.fn.init.prototype=jQuery.fn;jQuery.parseJSON=function(json){if(!json&&json!==null){migrateWarn("jQuery.parseJSON requires a valid JSON string");return null}return oldParseJSON.apply(this,arguments)};jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||
"",version:match[2]||"0"}};if(!jQuery.browser){matched=jQuery.uaMatch(navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome)browser.webkit=true;else if(browser.webkit)browser.safari=true;jQuery.browser=browser}migrateWarnProp(jQuery,"browser",jQuery.browser,"jQuery.browser is deprecated");jQuery.sub=function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(true,jQuerySub,
this);jQuerySub.superclass=this;jQuerySub.fn=jQuerySub.prototype=this();jQuerySub.fn.constructor=jQuerySub;jQuerySub.sub=this.sub;jQuerySub.fn.init=function init(selector,context){if(context&&context instanceof jQuery&&!(context instanceof jQuerySub))context=jQuerySub(context);return jQuery.fn.init.call(this,selector,context,rootjQuerySub)};jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);migrateWarn("jQuery.sub() is deprecated");return jQuerySub};jQuery.ajaxSetup({converters:{"text json":jQuery.parseJSON}});
var oldFnData=jQuery.fn.data;jQuery.fn.data=function(name){var ret,evt,elem=this[0];if(elem&&name==="events"&&arguments.length===1){ret=jQuery.data(elem,name);evt=jQuery._data(elem,name);if((ret===undefined||ret===evt)&&evt!==undefined){migrateWarn("Use of jQuery.fn.data('events') is deprecated");return evt}}return oldFnData.apply(this,arguments)};var rscriptType=/\/(java|ecma)script/i,oldSelf=jQuery.fn.andSelf||jQuery.fn.addBack;jQuery.fn.andSelf=function(){migrateWarn("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");
return oldSelf.apply(this,arguments)};if(!jQuery.clean)jQuery.clean=function(elems,context,fragment,scripts){context=context||document;context=!context.nodeType&&context[0]||context;context=context.ownerDocument||context;migrateWarn("jQuery.clean() is deprecated");var i,elem,handleScript,jsTags,ret=[];jQuery.merge(ret,jQuery.buildFragment(elems,context).childNodes);if(fragment){handleScript=function(elem){if(!elem.type||rscriptType.test(elem.type))return scripts?scripts.push(elem.parentNode?elem.parentNode.removeChild(elem):
elem):fragment.appendChild(elem)};for(i=0;(elem=ret[i])!=null;i++)if(!(jQuery.nodeName(elem,"script")&&handleScript(elem))){fragment.appendChild(elem);if(typeof elem.getElementsByTagName!=="undefined"){jsTags=jQuery.grep(jQuery.merge([],elem.getElementsByTagName("script")),handleScript);ret.splice.apply(ret,[i+1,0].concat(jsTags));i+=jsTags.length}}}return ret};var eventAdd=jQuery.event.add,eventRemove=jQuery.event.remove,eventTrigger=jQuery.event.trigger,oldToggle=jQuery.fn.toggle,oldLive=jQuery.fn.live,
oldDie=jQuery.fn.die,ajaxEvents="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",rajaxEvent=new RegExp("\\b(?:"+ajaxEvents+")\\b"),rhoverHack=/(?:^|\s)hover(\.\S+|)\b/,hoverHack=function(events){if(typeof events!=="string"||jQuery.event.special.hover)return events;if(rhoverHack.test(events))migrateWarn("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'");return events&&events.replace(rhoverHack,"mouseenter$1 mouseleave$1")};if(jQuery.event.props&&jQuery.event.props[0]!==
"attrChange")jQuery.event.props.unshift("attrChange","attrName","relatedNode","srcElement");if(jQuery.event.dispatch)migrateWarnProp(jQuery.event,"handle",jQuery.event.dispatch,"jQuery.event.handle is undocumented and deprecated");jQuery.event.add=function(elem,types,handler,data,selector){if(elem!==document&&rajaxEvent.test(types))migrateWarn("AJAX events should be attached to document: "+types);eventAdd.call(this,elem,hoverHack(types||""),handler,data,selector)};jQuery.event.remove=function(elem,
types,handler,selector,mappedTypes){eventRemove.call(this,elem,hoverHack(types)||"",handler,selector,mappedTypes)};jQuery.fn.error=function(){var args=Array.prototype.slice.call(arguments,0);migrateWarn("jQuery.fn.error() is deprecated");args.splice(0,0,"error");if(arguments.length)return this.bind.apply(this,args);this.triggerHandler.apply(this,args);return this};jQuery.fn.toggle=function(fn,fn2){if(!jQuery.isFunction(fn)||!jQuery.isFunction(fn2))return oldToggle.apply(this,arguments);migrateWarn("jQuery.fn.toggle(handler, handler...) is deprecated");
var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false};toggler.guid=guid;while(i<args.length)args[i++].guid=guid;return this.click(toggler)};jQuery.fn.live=function(types,data,fn){migrateWarn("jQuery.fn.live() is deprecated");if(oldLive)return oldLive.apply(this,arguments);jQuery(this.context).on(types,
this.selector,data,fn);return this};jQuery.fn.die=function(types,fn){migrateWarn("jQuery.fn.die() is deprecated");if(oldDie)return oldDie.apply(this,arguments);jQuery(this.context).off(types,this.selector||"**",fn);return this};jQuery.event.trigger=function(event,data,elem,onlyHandlers){if(!elem&&!rajaxEvent.test(event))migrateWarn("Global events are undocumented and deprecated");return eventTrigger.call(this,event,data,elem||document,onlyHandlers)};jQuery.each(ajaxEvents.split("|"),function(_,name){jQuery.event.special[name]=
{setup:function(){var elem=this;if(elem!==document){jQuery.event.add(document,name+"."+jQuery.guid,function(){jQuery.event.trigger(name,null,elem,true)});jQuery._data(this,name,jQuery.guid++)}return false},teardown:function(){if(this!==document)jQuery.event.remove(document,name+"."+jQuery._data(this,name));return false}}})})(jQuery,window);(function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case "Object":var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=t.util.clone(e[i]));return r;case "Array":return e.slice()}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var i in n)r[i]=n[i];return r},insertBefore:function(e,n,r,i){i=i||t.languages;var s=i[e],
o={};for(var u in s)if(s.hasOwnProperty(u)){if(u==n)for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);o[u]=s[u]}return i[e]=o},DFS:function(e,n){for(var r in e){n.call(e,r,e[r]);t.util.type(e)==="Object"&&t.languages.DFS(e[r],n)}}},highlightAll:function(e,n){var r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code');for(var i=0,s;s=r[i++];)t.highlightElement(s,e===!0,n)},highlightElement:function(r,i,s){var o,u,a=r;while(a&&!e.test(a.className))a=
a.parentNode;if(a){o=(a.className.match(e)||[,""])[1];u=t.languages[o]}if(!u)return;r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+o;a=r.parentNode;/pre/i.test(a.nodeName)&&(a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+o);var f=r.textContent;if(!f)return;f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ");var l={element:r,language:o,grammar:u,code:f};t.hooks.run("before-highlight",l);if(i&&self.Worker){var c=new Worker(t.filename);
c.onmessage=function(e){l.highlightedCode=n.stringify(JSON.parse(e.data),o);t.hooks.run("before-insert",l);l.element.innerHTML=l.highlightedCode;s&&s.call(l.element);t.hooks.run("after-highlight",l)};c.postMessage(JSON.stringify({language:l.language,code:l.code}))}else{l.highlightedCode=t.highlight(l.code,l.grammar,l.language);t.hooks.run("before-insert",l);l.element.innerHTML=l.highlightedCode;s&&s.call(r);t.hooks.run("after-highlight",l)}},highlight:function(e,r,i){return n.stringify(t.tokenize(e,
r),i)},tokenize:function(e,n,r){var i=t.Token,s=[e],o=n.rest;if(o){for(var u in o)n[u]=o[u];delete n.rest}e:for(var u in n){if(!n.hasOwnProperty(u)||!n[u])continue;var a=n[u],f=a.inside,l=!!a.lookbehind,c=0;a=a.pattern||a;for(var h=0;h<s.length;h++){var p=s[h];if(s.length>e.length)break e;if(p instanceof i)continue;a.lastIndex=0;var d=a.exec(p);if(d){l&&(c=d[1].length);var v=d.index-1+c,d=d[0].slice(c),m=d.length,g=v+m,y=p.slice(0,v+1),b=p.slice(g+1),w=[h,1];y&&w.push(y);var E=new i(u,f?t.tokenize(d,
f):d);w.push(E);b&&w.push(b);Array.prototype.splice.apply(s,w)}}}return s},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[];r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(!r||!r.length)return;for(var i=0,s;s=r[i++];)s(n)}}},n=t.Token=function(e,t){this.type=e;this.content=t};n.stringify=function(e,r,i){if(typeof e=="string")return e;if(Object.prototype.toString.call(e)=="[object Array]")return e.map(function(t){return n.stringify(t,r,e)}).join("");var s={type:e.type,content:n.stringify(e.content,
r,i),tag:"span",classes:["token",e.type],attributes:{},language:r,parent:i};s.type=="comment"&&(s.attributes.spellcheck="true");t.hooks.run("wrap",s);var o="";for(var u in s.attributes)o+=u+'="'+(s.attributes[u]||"")+'"';return"<"+s.tag+' class="'+s.classes.join(" ")+'" '+o+">"+s.content+"</"+s.tag+">"};if(!self.document){self.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,i=n.code;self.postMessage(JSON.stringify(t.tokenize(i,t.languages[r])));self.close()},!1);return}var r=
document.getElementsByTagName("script");r=r[r.length-1];if(r){t.filename=r.src;document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)}})();
Prism.languages.markup={comment:/&lt;!--[\w\W]*?--\x3e/g,prolog:/&lt;\?.+?\?>/,doctype:/&lt;!DOCTYPE.+?>/,cdata:/&lt;!\[CDATA\[[\w\W]*?]]\x3e/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?>/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|>|"/g}},punctuation:/\/?>/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},
entity:/&amp;#?[\da-z]{1,8};/gi};Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*{))/gi,inside:{punctuation:/[;:]/g}},url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\};]*(?=\s*\{)/g,property:/(\b|\B)[\w-]+(?=\s*:)/ig,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g};
Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}});
Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|(^|[^:])\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,"class-name":{pattern:/((?:(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/ig,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,"function":{pattern:/[a-z0-9_]+\(/ig,inside:{punctuation:/\(/}},
number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,operator:/[-+]{1,2}|!|&lt;=?|>=?|={1,3}|(&amp;){1,2}|\|?\||\?|\*|\/|\~|\^|\%/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g};Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?|NaN|-?Infinity)\b/g});
Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}});Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}});(function(){var SelectParser;SelectParser=function(){function SelectParser(){this.options_index=0;this.parsed=[]}SelectParser.prototype.add_node=function(child){if(child.nodeName==="OPTGROUP")return this.add_group(child);else return this.add_option(child)};SelectParser.prototype.add_group=function(group){var group_position,option,_i,_len,_ref,_results;group_position=this.parsed.length;this.parsed.push({array_index:group_position,group:true,label:group.label,children:0,disabled:group.disabled});_ref=
group.childNodes;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];_results.push(this.add_option(option,group_position,group.disabled))}return _results};SelectParser.prototype.add_option=function(option,group_position,group_disabled){if(option.nodeName==="OPTION"){if(option.text!==""){if(group_position!=null)this.parsed[group_position].children+=1;this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML,
selected:option.selected,disabled:group_disabled===true?group_disabled:option.disabled,group_array_index:group_position,classes:option.className,style:option.style.cssText})}else this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:true});return this.options_index+=1}};return SelectParser}();SelectParser.select_to_array=function(select){var child,parser,_i,_len,_ref;parser=new SelectParser;_ref=select.childNodes;for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];
parser.add_node(child)}return parser.parsed};this.SelectParser=SelectParser}).call(this);
(function(){var AbstractChosen,root;root=this;AbstractChosen=function(){function AbstractChosen(form_field,options){this.form_field=form_field;this.options=options!=null?options:{};this.set_default_values();this.is_multiple=this.form_field.multiple;this.set_default_text();this.setup();this.set_up_html();this.register_observers();this.finish_setup()}AbstractChosen.prototype.set_default_values=function(){var _this=this;this.click_test_action=function(evt){return _this.test_active_click(evt)};this.activate_action=
function(evt){return _this.activate_field(evt)};this.active_field=false;this.mouse_on_container=false;this.results_showing=false;this.result_highlighted=null;this.result_single_selected=null;this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:false;this.disable_search_threshold=this.options.disable_search_threshold||0;this.search_contains=this.options.search_contains||false;this.choices=
0;this.single_backstroke_delete=this.options.single_backstroke_delete||false;return this.max_selected_options=this.options.max_selected_options||Infinity};AbstractChosen.prototype.set_default_text=function(){if(this.form_field.getAttribute("data-placeholder"))this.default_text=this.form_field.getAttribute("data-placeholder");else if(this.is_multiple)this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options";else this.default_text=this.options.placeholder_text_single||
this.options.placeholder_text||"Select an Option";return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"};AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=true};AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=false};AbstractChosen.prototype.input_focus=function(evt){var _this=this;if(!this.active_field)return setTimeout(function(){return _this.container_mousedown()},
50)};AbstractChosen.prototype.input_blur=function(evt){var _this=this;if(!this.mouse_on_container){this.active_field=false;return setTimeout(function(){return _this.blur_test()},100)}};AbstractChosen.prototype.result_add_option=function(option){var classes,style;if(!option.disabled){option.dom_id=this.container_id+"_o_"+option.array_index;classes=option.selected&&this.is_multiple?[]:["active-result"];if(option.selected)classes.push("result-selected");if(option.group_array_index!=null)classes.push("group-option");
if(option.classes!=="")classes.push(option.classes);style=option.style.cssText!==""?' style="'+option.style+'"':"";return'<li id="'+option.dom_id+'" class="'+classes.join(" ")+'"'+style+">"+option.html+"</li>"}else{option.dom_id=this.container_id+"_o_"+option.array_index;classes=option.selected&&this.is_multiple?[]:["active-result"];if(option.selected)classes.push("result-selected");if(option.group_array_index!=null)classes.push("group-option");if(option.classes!=="")classes.push(option.classes);
classes.push("disabled");style=option.style.cssText!==""?' style="color:#aaa;'+option.style+'"':"";return'<li id="'+option.dom_id+'" class="'+classes.join(" ")+'"'+style+">"+option.html+"</li>"}};AbstractChosen.prototype.results_update_field=function(){if(!this.is_multiple)this.results_reset_cleanup();this.result_clear_highlight();this.result_single_selected=null;return this.results_build()};AbstractChosen.prototype.results_toggle=function(){if(this.results_showing)return this.results_hide();else return this.results_show()};
AbstractChosen.prototype.results_search=function(evt){if(this.results_showing)return this.winnow_results();else return this.results_show()};AbstractChosen.prototype.keyup_checker=function(evt){var stroke,_ref;stroke=(_ref=evt.which)!=null?_ref:evt.keyCode;this.search_field_scale();switch(stroke){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();else if(!this.pending_backstroke){this.result_clear_highlight();return this.results_search()}break;case 13:evt.preventDefault();
if(this.results_showing)return this.result_select(evt);break;case 27:if(this.results_showing)this.results_hide();return true;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};AbstractChosen.prototype.generate_field_id=function(){var new_id;new_id=this.generate_random_id();this.form_field.id=new_id;return new_id};AbstractChosen.prototype.generate_random_char=function(){var chars,newchar,rand;chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";rand=Math.floor(Math.random()*
chars.length);return newchar=chars.substring(rand,rand+1)};return AbstractChosen}();root.AbstractChosen=AbstractChosen}).call(this);
(function(){var $,Chosen,get_side_border_padding,root,__hasProp=Object.prototype.hasOwnProperty,__extends=function(child,parent){for(var key in parent)if(__hasProp.call(parent,key))child[key]=parent[key];function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};root=this;$=jQuery;$.fn.extend({chosen:function(options){if($.browser.msie&&($.browser.version==="6.0"||$.browser.version==="7.0"))return this;return this.each(function(input_field){var $this;
$this=$(this);if(!$this.hasClass("chzn-done"))return $this.data("chosen",new Chosen(this,options))})}});Chosen=function(_super){__extends(Chosen,_super);function Chosen(){Chosen.__super__.constructor.apply(this,arguments)}Chosen.prototype.setup=function(){this.form_field_jq=$(this.form_field);this.current_value=this.form_field_jq.val();return this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")};Chosen.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")};Chosen.prototype.set_up_html=
function(){var container_div,dd_top,dd_width,sf_width;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id();this.container_id+="_chzn";this.f_width=this.form_field_jq.outerWidth();container_div=$("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"});if(this.is_multiple)container_div.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+
'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>');else container_div.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>');this.form_field_jq.hide().after(container_div);this.container=
$("#"+this.container_id);this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single"));this.dropdown=this.container.find("div.chzn-drop").first();dd_top=this.container.height();dd_width=this.f_width-get_side_border_padding(this.dropdown);this.dropdown.css({"width":dd_width+"px","top":dd_top+"px"});this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();
if(this.is_multiple){this.search_choices=this.container.find("ul.chzn-choices").first();this.search_container=this.container.find("li.search-field").first()}else{this.search_container=this.container.find("div.chzn-search").first();this.selected_item=this.container.find(".chzn-single").first();sf_width=dd_width-get_side_border_padding(this.search_container)-get_side_border_padding(this.search_field);this.search_field.css({"width":sf_width+"px"})}this.results_build();this.set_tab_index();return this.form_field_jq.trigger("liszt:ready",
{chosen:this})};Chosen.prototype.register_observers=function(){var _this=this;this.container.mousedown(function(evt){return _this.container_mousedown(evt)});this.container.mouseup(function(evt){return _this.container_mouseup(evt)});this.container.mouseenter(function(evt){return _this.mouse_enter(evt)});this.container.mouseleave(function(evt){return _this.mouse_leave(evt)});this.search_results.mouseup(function(evt){return _this.search_results_mouseup(evt)});this.search_results.mouseover(function(evt){return _this.search_results_mouseover(evt)});
this.search_results.mouseout(function(evt){return _this.search_results_mouseout(evt)});this.form_field_jq.bind("liszt:updated",function(evt){return _this.results_update_field(evt)});this.search_field.blur(function(evt){return _this.input_blur(evt)});this.search_field.keyup(function(evt){return _this.keyup_checker(evt)});this.search_field.keydown(function(evt){return _this.keydown_checker(evt)});if(this.is_multiple){this.search_choices.click(function(evt){return _this.choices_click(evt)});return this.search_field.focus(function(evt){return _this.input_focus(evt)})}else return this.container.click(function(evt){return evt.preventDefault()})};
Chosen.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled){this.container.addClass("chzn-disabled");this.search_field[0].disabled=true;if(!this.is_multiple)this.selected_item.unbind("focus",this.activate_action);return this.close_field()}else{this.container.removeClass("chzn-disabled");this.search_field[0].disabled=false;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)}};Chosen.prototype.container_mousedown=
function(evt){var target_closelink;if(!this.is_disabled){target_closelink=evt!=null?$(evt.target).hasClass("search-choice-close"):false;if(evt&&evt.type==="mousedown"&&!this.results_showing)evt.stopPropagation();if(!this.pending_destroy_click&&!target_closelink){if(!this.active_field){if(this.is_multiple)this.search_field.val("");$(document).click(this.click_test_action);this.results_show()}else if(!this.is_multiple&&evt&&($(evt.target)[0]===this.selected_item[0]||$(evt.target).parents("a.chzn-single").length)){evt.preventDefault();
this.results_toggle()}return this.activate_field()}else return this.pending_destroy_click=false}};Chosen.prototype.container_mouseup=function(evt){if(evt.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(evt)};Chosen.prototype.blur_test=function(evt){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()};Chosen.prototype.close_field=function(){$(document).unbind("click",this.click_test_action);if(!this.is_multiple){this.selected_item.attr("tabindex",
this.search_field.attr("tabindex"));this.search_field.attr("tabindex",-1)}this.active_field=false;this.results_hide();this.container.removeClass("chzn-container-active");this.winnow_results_clear();this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};Chosen.prototype.activate_field=function(){if(!this.is_multiple&&!this.active_field){this.search_field.attr("tabindex",this.selected_item.attr("tabindex"));this.selected_item.attr("tabindex",-1)}this.container.addClass("chzn-container-active");
this.active_field=true;this.search_field.val(this.search_field.val());return this.search_field.focus()};Chosen.prototype.test_active_click=function(evt){if($(evt.target).parents("#"+this.container_id).length)return this.active_field=true;else return this.close_field()};Chosen.prototype.results_build=function(){var content,data,_i,_len,_ref;this.parsing=true;this.results_data=root.SelectParser.select_to_array(this.form_field);if(this.is_multiple&&this.choices>0){this.search_choices.find("li.search-choice").remove();
this.choices=0}else if(!this.is_multiple){this.selected_item.addClass("chzn-default").find("span").text(this.default_text);if(this.form_field.options.length<=this.disable_search_threshold)this.container.addClass("chzn-container-single-nosearch");else this.container.removeClass("chzn-container-single-nosearch")}content="";_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++){data=_ref[_i];if(data.group)content+=this.result_add_group(data);else if(!data.empty){content+=this.result_add_option(data);
if(data.selected&&this.is_multiple)this.choice_build(data);else if(data.selected&&!this.is_multiple){this.selected_item.removeClass("chzn-default").find("span").text(data.text);if(this.allow_single_deselect)this.single_deselect_control_build()}}}this.search_field_disabled();this.show_search_field_default();this.search_field_scale();this.search_results.html(content);return this.parsing=false};Chosen.prototype.result_add_group=function(group){if(!group.disabled){group.dom_id=this.container_id+"_g_"+
group.array_index;return'<li id="'+group.dom_id+'" class="group-result">'+$("<div />").text(group.label).html()+"</li>"}else return""};Chosen.prototype.result_do_highlight=function(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){this.result_clear_highlight();this.result_highlight=el;this.result_highlight.addClass("highlighted");maxHeight=parseInt(this.search_results.css("maxHeight"),10);visible_top=this.search_results.scrollTop();visible_bottom=maxHeight+visible_top;
high_top=this.result_highlight.position().top+this.search_results.scrollTop();high_bottom=high_top+this.result_highlight.outerHeight();if(high_bottom>=visible_bottom)return this.search_results.scrollTop(high_bottom-maxHeight>0?high_bottom-maxHeight:0);else if(high_top<visible_top)return this.search_results.scrollTop(high_top)}};Chosen.prototype.result_clear_highlight=function(){if(this.result_highlight)this.result_highlight.removeClass("highlighted");return this.result_highlight=null};Chosen.prototype.results_show=
function(){var dd_top;if(!this.is_multiple){this.selected_item.addClass("chzn-single-with-drop");if(this.result_single_selected)this.result_do_highlight(this.result_single_selected)}else if(this.max_selected_options<=this.choices){this.form_field_jq.trigger("liszt:maxselected",{chosen:this});return false}dd_top=this.is_multiple?this.container.height():this.container.height()-1;this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});this.dropdown.css({"top":dd_top+"px","left":0});this.results_showing=
true;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};Chosen.prototype.results_hide=function(){if(!this.is_multiple)this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this});this.dropdown.css({"left":"-9000px"});return this.results_showing=false};Chosen.prototype.set_tab_index=function(el){var ti;if(this.form_field_jq.attr("tabindex")){ti=this.form_field_jq.attr("tabindex");
this.form_field_jq.attr("tabindex",-1);if(this.is_multiple)return this.search_field.attr("tabindex",ti);else{this.selected_item.attr("tabindex",ti);return this.search_field.attr("tabindex",-1)}}};Chosen.prototype.show_search_field_default=function(){if(this.is_multiple&&this.choices<1&&!this.active_field){this.search_field.val(this.default_text);return this.search_field.addClass("default")}else{this.search_field.val("");return this.search_field.removeClass("default")}};Chosen.prototype.search_results_mouseup=
function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target.length){this.result_highlight=target;return this.result_select(evt)}};Chosen.prototype.search_results_mouseover=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target)return this.result_do_highlight(target)};Chosen.prototype.search_results_mouseout=function(evt){if($(evt.target).hasClass("active-result"||
$(evt.target).parents(".active-result").first()))return this.result_clear_highlight()};Chosen.prototype.choices_click=function(evt){evt.preventDefault();if(this.active_field&&!$(evt.target).hasClass("search-choice"||$(evt.target).parents(".search-choice").first)&&!this.results_showing)return this.results_show()};Chosen.prototype.choice_build=function(item){var choice_id,link,_this=this;if(this.is_multiple&&this.max_selected_options<=this.choices){this.form_field_jq.trigger("liszt:maxselected",{chosen:this});
return false}choice_id=this.container_id+"_c_"+item.array_index;this.choices+=1;this.search_container.before('<li class="search-choice" id="'+choice_id+'"><span>'+item.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+item.array_index+'"></a></li>');link=$("#"+choice_id).find("a").first();return link.click(function(evt){return _this.choice_destroy_link_click(evt)})};Chosen.prototype.choice_destroy_link_click=function(evt){evt.preventDefault();evt.stopPropagation();if(!this.is_disabled){this.pending_destroy_click=
true;return this.choice_destroy($(evt.target))}};Chosen.prototype.choice_destroy=function(link){this.choices-=1;this.show_search_field_default();if(this.is_multiple&&this.choices>0&&this.search_field.val().length<1)this.results_hide();this.result_deselect(link.attr("rel"));return link.parents("li").first().remove()};Chosen.prototype.results_reset=function(){this.form_field.options[0].selected=true;this.selected_item.find("span").text(this.default_text);if(!this.is_multiple)this.selected_item.addClass("chzn-default");
this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()};Chosen.prototype.results_reset_cleanup=function(){return this.selected_item.find("abbr").remove()};Chosen.prototype.result_select=function(evt){var high,high_id,item,position;if(this.result_highlight){high=this.result_highlight;if(high.hasClass("disabled")||high.hasClass("hidden"))return false;high_id=high.attr("id");this.result_clear_highlight();if(this.is_multiple)this.result_deactivate(high);
else{this.search_results.find(".result-selected").removeClass("result-selected");this.result_single_selected=high;this.selected_item.removeClass("chzn-default")}high.addClass("result-selected");position=high_id.substr(high_id.lastIndexOf("_")+1);item=this.results_data[position];item.selected=true;this.form_field.options[item.options_index].selected=true;if(this.is_multiple)this.choice_build(item);else{this.selected_item.find("span").first().text(item.text);if(this.allow_single_deselect)this.single_deselect_control_build()}if(!(evt.metaKey&&
this.is_multiple))this.results_hide();this.search_field.val("");if(this.is_multiple||this.form_field_jq.val()!==this.current_value)this.form_field_jq.trigger("change",{"selected":this.form_field.options[item.options_index].value});this.current_value=this.form_field_jq.val();return this.search_field_scale()}};Chosen.prototype.result_activate=function(el){return el.addClass("active-result")};Chosen.prototype.result_deactivate=function(el){return el.removeClass("active-result")};Chosen.prototype.result_deselect=
function(pos){var result,result_data;result_data=this.results_data[pos];result_data.selected=false;this.form_field.options[result_data.options_index].selected=false;result=$("#"+this.container_id+"_o_"+pos);result.removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();this.form_field_jq.trigger("change",{deselected:this.form_field.options[result_data.options_index].value});return this.search_field_scale()};Chosen.prototype.single_deselect_control_build=
function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')};Chosen.prototype.winnow_results=function(){var found,option,part,parts,regex,regexAnchor,result,result_id,results,searchText,startpos,text,zregex,_i,_j,_len,_len2,_ref;this.no_results_clear();results=0;searchText=this.search_field.val()===this.default_text?"":$("<div/>").text($.trim(this.search_field.val())).html();regexAnchor=
this.search_contains?"":"^";regex=new RegExp(regexAnchor+searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");zregex=new RegExp(searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];if(!option.empty)if(option.group)$("#"+option.dom_id).css("display","none");else if(!(this.is_multiple&&option.selected)){found=false;result_id=option.dom_id;result=$("#"+result_id);if(regex.test(option.html)){found=true;results+=
1}else if(option.html.indexOf(" ")>=0||option.html.indexOf("[")===0){parts=option.html.replace(/\[|\]/g,"").split(" ");if(parts.length)for(_j=0,_len2=parts.length;_j<_len2;_j++){part=parts[_j];if(regex.test(part)){found=true;results+=1}}}if(found){if(searchText.length){startpos=option.html.search(zregex);text=option.html.substr(0,startpos+searchText.length)+"</em>"+option.html.substr(startpos+searchText.length);text=text.substr(0,startpos)+"<em>"+text.substr(startpos)}else text=option.html;result.html(text);
this.result_activate(result);if(option.group_array_index!=null)$("#"+this.results_data[option.group_array_index].dom_id).css("display","list-item")}else{if(this.result_highlight&&result_id===this.result_highlight.attr("id"))this.result_clear_highlight();this.result_deactivate(result)}}}if(results<1&&searchText.length)return this.no_results(searchText);else return this.winnow_results_set_highlight()};Chosen.prototype.winnow_results_clear=function(){var li,lis,_i,_len,_results;this.search_field.val("");
lis=this.search_results.find("li");_results=[];for(_i=0,_len=lis.length;_i<_len;_i++){li=lis[_i];li=$(li);if(li.hasClass("group-result"))_results.push(li.css("display","auto"));else if(!this.is_multiple||!li.hasClass("result-selected"))_results.push(this.result_activate(li));else _results.push(void 0)}return _results};Chosen.prototype.winnow_results_set_highlight=function(){var do_high,selected_results;if(!this.result_highlight){selected_results=!this.is_multiple?this.search_results.find(".result-selected.active-result"):
[];do_high=selected_results.length?selected_results.first():this.search_results.find(".active-result").first();if(do_high!=null)return this.result_do_highlight(do_high)}};Chosen.prototype.no_results=function(terms){var no_results_html;no_results_html=$('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');no_results_html.find("span").first().html(terms);return this.search_results.append(no_results_html)};Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};
Chosen.prototype.keydown_arrow=function(){var first_active,next_sib;if(!this.result_highlight){first_active=this.search_results.find("li.active-result").first();if(first_active)this.result_do_highlight($(first_active))}else if(this.results_showing){next_sib=this.result_highlight.nextAll("li.active-result").first();if(next_sib)this.result_do_highlight(next_sib)}if(!this.results_showing)return this.results_show()};Chosen.prototype.keyup_arrow=function(){var prev_sibs;if(!this.results_showing&&!this.is_multiple)return this.results_show();
else if(this.result_highlight){prev_sibs=this.result_highlight.prevAll("li.active-result");if(prev_sibs.length)return this.result_do_highlight(prev_sibs.first());else{if(this.choices>0)this.results_hide();return this.result_clear_highlight()}}};Chosen.prototype.keydown_backstroke=function(){if(this.pending_backstroke)return this.clear_backstroke();else{this.pending_backstroke=this.search_container.siblings("li.search-choice").last();if(this.single_backstroke_delete)return this.keydown_backstroke();
else return this.pending_backstroke.addClass("search-choice-focus")}};Chosen.prototype.clear_backstroke=function(){if(this.pending_backstroke)this.pending_backstroke.removeClass("search-choice-focus");return this.pending_backstroke=null};Chosen.prototype.keydown_checker=function(evt){var stroke,_ref;stroke=(_ref=evt.which)!=null?_ref:evt.keyCode;this.search_field_scale();if(stroke!==8&&this.pending_backstroke)this.clear_backstroke();switch(stroke){case 8:this.backstroke_length=this.search_field.val().length;
break;case 9:if(this.results_showing&&!this.is_multiple)this.result_select(evt);this.mouse_on_container=false;break;case 13:evt.preventDefault();break;case 38:evt.preventDefault();this.keyup_arrow();break;case 40:this.keydown_arrow();break}};Chosen.prototype.search_field_scale=function(){var dd_top,div,h,style,style_block,styles,w,_i,_len;if(this.is_multiple){h=0;w=0;style_block="position:absolute; left: -1000px; top: -1000px; display:none;";styles=["font-size","font-style","font-weight","font-family",
"line-height","text-transform","letter-spacing"];for(_i=0,_len=styles.length;_i<_len;_i++){style=styles[_i];style_block+=style+":"+this.search_field.css(style)+";"}div=$("<div />",{"style":style_block});div.text(this.search_field.val());$("body").append(div);w=div.width()+25;div.remove();if(w>this.f_width-10)w=this.f_width-10;this.search_field.css({"width":w+"px"});dd_top=this.container.height();return this.dropdown.css({"top":dd_top+"px"})}};Chosen.prototype.generate_random_id=function(){var string;
string="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();while($("#"+string).length>0)string+=this.generate_random_char();return string};return Chosen}(AbstractChosen);get_side_border_padding=function(elmt){var side_border_padding;return side_border_padding=elmt.outerWidth()-elmt.width()};root.get_side_border_padding=get_side_border_padding}).call(this);(function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case "Object":var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=t.util.clone(e[i]));return r;case "Array":return e.slice()}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var i in n)r[i]=n[i];return r},insertBefore:function(e,n,r,i){i=i||t.languages;var s=i[e],
o={};for(var u in s)if(s.hasOwnProperty(u)){if(u==n)for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);o[u]=s[u]}return i[e]=o},DFS:function(e,n){for(var r in e){n.call(e,r,e[r]);t.util.type(e)==="Object"&&t.languages.DFS(e[r],n)}}},highlightAll:function(e,n){var r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code');for(var i=0,s;s=r[i++];)t.highlightElement(s,e===!0,n)},highlightElement:function(r,i,s){var o,u,a=r;while(a&&!e.test(a.className))a=
a.parentNode;if(a){o=(a.className.match(e)||[,""])[1];u=t.languages[o]}if(!u)return;r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+o;a=r.parentNode;/pre/i.test(a.nodeName)&&(a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+o);var f=r.textContent;if(!f)return;f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ");var l={element:r,language:o,grammar:u,code:f};t.hooks.run("before-highlight",l);if(i&&self.Worker){var c=new Worker(t.filename);
c.onmessage=function(e){l.highlightedCode=n.stringify(JSON.parse(e.data),o);t.hooks.run("before-insert",l);l.element.innerHTML=l.highlightedCode;s&&s.call(l.element);t.hooks.run("after-highlight",l)};c.postMessage(JSON.stringify({language:l.language,code:l.code}))}else{l.highlightedCode=t.highlight(l.code,l.grammar,l.language);t.hooks.run("before-insert",l);l.element.innerHTML=l.highlightedCode;s&&s.call(r);t.hooks.run("after-highlight",l)}},highlight:function(e,r,i){return n.stringify(t.tokenize(e,
r),i)},tokenize:function(e,n,r){var i=t.Token,s=[e],o=n.rest;if(o){for(var u in o)n[u]=o[u];delete n.rest}e:for(var u in n){if(!n.hasOwnProperty(u)||!n[u])continue;var a=n[u],f=a.inside,l=!!a.lookbehind,c=0;a=a.pattern||a;for(var h=0;h<s.length;h++){var p=s[h];if(s.length>e.length)break e;if(p instanceof i)continue;a.lastIndex=0;var d=a.exec(p);if(d){l&&(c=d[1].length);var v=d.index-1+c,d=d[0].slice(c),m=d.length,g=v+m,y=p.slice(0,v+1),b=p.slice(g+1),w=[h,1];y&&w.push(y);var E=new i(u,f?t.tokenize(d,
f):d);w.push(E);b&&w.push(b);Array.prototype.splice.apply(s,w)}}}return s},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[];r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(!r||!r.length)return;for(var i=0,s;s=r[i++];)s(n)}}},n=t.Token=function(e,t){this.type=e;this.content=t};n.stringify=function(e,r,i){if(typeof e=="string")return e;if(Object.prototype.toString.call(e)=="[object Array]")return e.map(function(t){return n.stringify(t,r,e)}).join("");var s={type:e.type,content:n.stringify(e.content,
r,i),tag:"span",classes:["token",e.type],attributes:{},language:r,parent:i};s.type=="comment"&&(s.attributes.spellcheck="true");t.hooks.run("wrap",s);var o="";for(var u in s.attributes)o+=u+'="'+(s.attributes[u]||"")+'"';return"<"+s.tag+' class="'+s.classes.join(" ")+'" '+o+">"+s.content+"</"+s.tag+">"};if(!self.document){self.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,i=n.code;self.postMessage(JSON.stringify(t.tokenize(i,t.languages[r])));self.close()},!1);return}var r=
document.getElementsByTagName("script");r=r[r.length-1];if(r){t.filename=r.src;document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)}})();
Prism.languages.markup={comment:/&lt;!--[\w\W]*?--\x3e/g,prolog:/&lt;\?.+?\?>/,doctype:/&lt;!DOCTYPE.+?>/,cdata:/&lt;!\[CDATA\[[\w\W]*?]]\x3e/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?>/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|>|"/g}},punctuation:/\/?>/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},
entity:/&amp;#?[\da-z]{1,8};/gi};Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*{))/gi,inside:{punctuation:/[;:]/g}},url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\};]*(?=\s*\{)/g,property:/(\b|\B)[\w-]+(?=\s*:)/ig,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g};
Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}});
Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|(^|[^:])\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,"class-name":{pattern:/((?:(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/ig,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,"function":{pattern:/[a-z0-9_]+\(/ig,inside:{punctuation:/\(/}},
number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,operator:/[-+]{1,2}|!|&lt;=?|>=?|={1,3}|(&amp;){1,2}|\|?\||\?|\*|\/|\~|\^|\%/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g};Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?|NaN|-?Infinity)\b/g});
Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}});Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}});/*
 Chosen, a Select Box Enhancer for jQuery and Prototype
by Patrick Filler for Harvest, http://getharvest.com

Version 1.8.3
Full source at https://github.com/harvesthq/chosen
Copyright (c) 2011-2018 Harvest http://getharvest.com

MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
This file is generated by `grunt build`, do not edit it by hand.
*/
(function(){var $,AbstractChosen,Chosen,SelectParser,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){for(var key in parent)if(hasProp.call(parent,key))child[key]=parent[key];function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;SelectParser=function(){function SelectParser(){this.options_index=0;this.parsed=[]}SelectParser.prototype.add_node=
function(child){if(child.nodeName.toUpperCase()==="OPTGROUP")return this.add_group(child);else return this.add_option(child)};SelectParser.prototype.add_group=function(group){var group_position,i,len,option,ref,results1;group_position=this.parsed.length;this.parsed.push({array_index:group_position,group:true,label:group.label,title:group.title?group.title:void 0,children:0,disabled:group.disabled,classes:group.className});ref=group.childNodes;results1=[];for(i=0,len=ref.length;i<len;i++){option=ref[i];
results1.push(this.add_option(option,group_position,group.disabled))}return results1};SelectParser.prototype.add_option=function(option,group_position,group_disabled){if(option.nodeName.toUpperCase()==="OPTION"){if(option.text!==""){if(group_position!=null)this.parsed[group_position].children+=1;this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML,title:option.title?option.title:void 0,selected:option.selected,
disabled:group_disabled===true?group_disabled:option.disabled,group_array_index:group_position,group_label:group_position!=null?this.parsed[group_position].label:null,classes:option.className,style:option.style.cssText})}else this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:true});return this.options_index+=1}};return SelectParser}();SelectParser.select_to_array=function(select){var child,i,len,parser,ref;parser=new SelectParser;ref=select.childNodes;for(i=0,
len=ref.length;i<len;i++){child=ref[i];parser.add_node(child)}return parser.parsed};AbstractChosen=function(){function AbstractChosen(form_field,options1){this.form_field=form_field;this.options=options1!=null?options1:{};this.label_click_handler=bind(this.label_click_handler,this);if(!AbstractChosen.browser_is_supported())return;this.is_multiple=this.form_field.multiple;this.set_default_text();this.set_default_values();this.setup();this.set_up_html();this.register_observers();this.on_ready()}AbstractChosen.prototype.set_default_values=
function(){this.click_test_action=function(_this){return function(evt){return _this.test_active_click(evt)}}(this);this.activate_action=function(_this){return function(evt){return _this.activate_field(evt)}}(this);this.active_field=false;this.mouse_on_container=false;this.results_showing=false;this.result_highlighted=null;this.is_rtl=this.options.rtl||/\bchosen-rtl\b/.test(this.form_field.className);this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&
this.form_field.options[0].text===""?this.options.allow_single_deselect:false;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||false;this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:true;this.group_search=this.options.group_search!=null?this.options.group_search:true;this.search_contains=this.options.search_contains||false;this.single_backstroke_delete=this.options.single_backstroke_delete!=
null?this.options.single_backstroke_delete:true;this.max_selected_options=this.options.max_selected_options||Infinity;this.inherit_select_classes=this.options.inherit_select_classes||false;this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:true;this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:true;this.include_group_label_in_selected=this.options.include_group_label_in_selected||
false;this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY;this.case_sensitive_search=this.options.case_sensitive_search||false;return this.hide_results_on_select=this.options.hide_results_on_select!=null?this.options.hide_results_on_select:true};AbstractChosen.prototype.set_default_text=function(){if(this.form_field.getAttribute("data-placeholder"))this.default_text=this.form_field.getAttribute("data-placeholder");else if(this.is_multiple)this.default_text=this.options.placeholder_text_multiple||
this.options.placeholder_text||AbstractChosen.default_multiple_text;else this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text;this.default_text=this.escape_html(this.default_text);return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text};AbstractChosen.prototype.choice_label=function(item){if(this.include_group_label_in_selected&&item.group_label!=
null)return"<b class='group-name'>"+item.group_label+"</b>"+item.html;else return item.html};AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=true};AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=false};AbstractChosen.prototype.input_focus=function(evt){if(this.is_multiple){if(!this.active_field)return setTimeout(function(_this){return function(){return _this.container_mousedown()}}(this),50)}else if(!this.active_field)return this.activate_field()};
AbstractChosen.prototype.input_blur=function(evt){if(!this.mouse_on_container){this.active_field=false;return setTimeout(function(_this){return function(){return _this.blur_test()}}(this),100)}};AbstractChosen.prototype.label_click_handler=function(evt){if(this.is_multiple)return this.container_mousedown(evt);else return this.activate_field()};AbstractChosen.prototype.results_option_build=function(options){var content,data,data_content,i,len,ref,shown_results;content="";shown_results=0;ref=this.results_data;
for(i=0,len=ref.length;i<len;i++){data=ref[i];data_content="";if(data.group)data_content=this.result_add_group(data);else data_content=this.result_add_option(data);if(data_content!==""){shown_results++;content+=data_content}if(options!=null?options.first:void 0)if(data.selected&&this.is_multiple)this.choice_build(data);else if(data.selected&&!this.is_multiple)this.single_set_selected_text(this.choice_label(data));if(shown_results>=this.max_shown_results)break}return content};AbstractChosen.prototype.result_add_option=
function(option){var classes,option_el;if(!option.search_match)return"";if(!this.include_option_in_results(option))return"";classes=[];if(!option.disabled&&!(option.selected&&this.is_multiple))classes.push("active-result");if(option.disabled&&!(option.selected&&this.is_multiple))classes.push("disabled-result");if(option.selected)classes.push("result-selected");if(option.group_array_index!=null)classes.push("group-option");if(option.classes!=="")classes.push(option.classes);option_el=document.createElement("li");
option_el.className=classes.join(" ");option_el.style.cssText=option.style;option_el.setAttribute("data-option-array-index",option.array_index);option_el.innerHTML=option.highlighted_html||option.html;if(option.title)option_el.title=option.title;return this.outerHTML(option_el)};AbstractChosen.prototype.result_add_group=function(group){var classes,group_el;if(!(group.search_match||group.group_match))return"";if(!(group.active_options>0))return"";classes=[];classes.push("group-result");if(group.classes)classes.push(group.classes);
group_el=document.createElement("li");group_el.className=classes.join(" ");group_el.innerHTML=group.highlighted_html||this.escape_html(group.label);if(group.title)group_el.title=group.title;return this.outerHTML(group_el)};AbstractChosen.prototype.results_update_field=function(){this.set_default_text();if(!this.is_multiple)this.results_reset_cleanup();this.result_clear_highlight();this.results_build();if(this.results_showing)return this.winnow_results()};AbstractChosen.prototype.reset_single_select_options=
function(){var i,len,ref,result,results1;ref=this.results_data;results1=[];for(i=0,len=ref.length;i<len;i++){result=ref[i];if(result.selected)results1.push(result.selected=false);else results1.push(void 0)}return results1};AbstractChosen.prototype.results_toggle=function(){if(this.results_showing)return this.results_hide();else return this.results_show()};AbstractChosen.prototype.results_search=function(evt){if(this.results_showing)return this.winnow_results();else return this.results_show()};AbstractChosen.prototype.winnow_results=
function(){var escapedQuery,fix,i,len,option,prefix,query,ref,regex,results,results_group,search_match,startpos,suffix,text;this.no_results_clear();results=0;query=this.get_search_text();escapedQuery=query.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");regex=this.get_search_regex(escapedQuery);ref=this.results_data;for(i=0,len=ref.length;i<len;i++){option=ref[i];option.search_match=false;results_group=null;search_match=null;option.highlighted_html="";if(this.include_option_in_results(option)){if(option.group){option.group_match=
false;option.active_options=0}if(option.group_array_index!=null&&this.results_data[option.group_array_index]){results_group=this.results_data[option.group_array_index];if(results_group.active_options===0&&results_group.search_match)results+=1;results_group.active_options+=1}text=option.group?option.label:option.text;if(!(option.group&&!this.group_search)){search_match=this.search_string_match(text,regex);option.search_match=search_match!=null;if(option.search_match&&!option.group)results+=1;if(option.search_match){if(query.length){startpos=
search_match.index;prefix=text.slice(0,startpos);fix=text.slice(startpos,startpos+query.length);suffix=text.slice(startpos+query.length);option.highlighted_html=this.escape_html(prefix)+"<em>"+this.escape_html(fix)+"</em>"+this.escape_html(suffix)}if(results_group!=null)results_group.group_match=true}else if(option.group_array_index!=null&&this.results_data[option.group_array_index].search_match)option.search_match=true}}}this.result_clear_highlight();if(results<1&&query.length){this.update_results_content("");
return this.no_results(query)}else{this.update_results_content(this.results_option_build());return this.winnow_results_set_highlight()}};AbstractChosen.prototype.get_search_regex=function(escaped_search_string){var regex_flag,regex_string;regex_string=this.search_contains?escaped_search_string:"(^|\\s|\\b)"+escaped_search_string+"[^\\s]*";if(!(this.enable_split_word_search||this.search_contains))regex_string="^"+regex_string;regex_flag=this.case_sensitive_search?"":"i";return new RegExp(regex_string,
regex_flag)};AbstractChosen.prototype.search_string_match=function(search_string,regex){var match;match=regex.exec(search_string);if(!this.search_contains&&(match!=null?match[1]:void 0))match.index+=1;return match};AbstractChosen.prototype.choices_count=function(){var i,len,option,ref;if(this.selected_option_count!=null)return this.selected_option_count;this.selected_option_count=0;ref=this.form_field.options;for(i=0,len=ref.length;i<len;i++){option=ref[i];if(option.selected)this.selected_option_count+=
1}return this.selected_option_count};AbstractChosen.prototype.choices_click=function(evt){evt.preventDefault();this.activate_field();if(!(this.results_showing||this.is_disabled))return this.results_show()};AbstractChosen.prototype.keydown_checker=function(evt){var ref,stroke;stroke=(ref=evt.which)!=null?ref:evt.keyCode;this.search_field_scale();if(stroke!==8&&this.pending_backstroke)this.clear_backstroke();switch(stroke){case 8:this.backstroke_length=this.get_search_field_value().length;break;case 9:if(this.results_showing&&
!this.is_multiple)this.result_select(evt);this.mouse_on_container=false;break;case 13:if(this.results_showing)evt.preventDefault();break;case 27:if(this.results_showing)evt.preventDefault();break;case 32:if(this.disable_search)evt.preventDefault();break;case 38:evt.preventDefault();this.keyup_arrow();break;case 40:evt.preventDefault();this.keydown_arrow();break}};AbstractChosen.prototype.keyup_checker=function(evt){var ref,stroke;stroke=(ref=evt.which)!=null?ref:evt.keyCode;this.search_field_scale();
switch(stroke){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)this.keydown_backstroke();else if(!this.pending_backstroke){this.result_clear_highlight();this.results_search()}break;case 13:evt.preventDefault();if(this.results_showing)this.result_select(evt);break;case 27:if(this.results_showing)this.results_hide();break;case 9:case 16:case 17:case 18:case 38:case 40:case 91:break;default:this.results_search();break}};AbstractChosen.prototype.clipboard_event_checker=function(evt){if(this.is_disabled)return;
return setTimeout(function(_this){return function(){return _this.results_search()}}(this),50)};AbstractChosen.prototype.container_width=function(){if(this.options.width!=null)return this.options.width;else return this.form_field.offsetWidth+"px"};AbstractChosen.prototype.include_option_in_results=function(option){if(this.is_multiple&&(!this.display_selected_options&&option.selected))return false;if(!this.display_disabled_options&&option.disabled)return false;if(option.empty)return false;return true};
AbstractChosen.prototype.search_results_touchstart=function(evt){this.touch_started=true;return this.search_results_mouseover(evt)};AbstractChosen.prototype.search_results_touchmove=function(evt){this.touch_started=false;return this.search_results_mouseout(evt)};AbstractChosen.prototype.search_results_touchend=function(evt){if(this.touch_started)return this.search_results_mouseup(evt)};AbstractChosen.prototype.outerHTML=function(element){var tmp;if(element.outerHTML)return element.outerHTML;tmp=document.createElement("div");
tmp.appendChild(element);return tmp.innerHTML};AbstractChosen.prototype.get_single_html=function(){return'<a class="chosen-single chosen-default">\n  <input class="chosen-search-input" type="text" autocomplete="off" />\n  <span>'+this.default_text+'</span>\n  <div><b></b></div>\n</a>\n<div class="chosen-drop">\n  <div class="chosen-search">\n  </div>\n  <ul class="chosen-results"></ul>\n</div>'};AbstractChosen.prototype.get_multi_html=function(){return'<ul class="chosen-choices">\n  <li class="search-field">\n    <input class="chosen-search-input" type="text" autocomplete="off" value="'+
this.default_text+'" />\n  </li>\n</ul>\n<div class="chosen-drop">\n  <ul class="chosen-results"></ul>\n</div>'};AbstractChosen.prototype.get_no_results_html=function(terms){return'<li class="no-results">\n  '+this.results_none_found+" <span>"+this.escape_html(terms)+"</span>\n</li>"};AbstractChosen.browser_is_supported=function(){if("Microsoft Internet Explorer"===window.navigator.appName)return document.documentMode>=8;if(/iP(od|hone)/i.test(window.navigator.userAgent)||/Windows Phone/i.test(window.navigator.userAgent)||
/Android.*Mobile/i.test(window.navigator.userAgent))return true;else if(/IEMobile/i.test(window.navigator.userAgent)||/BlackBerry/i.test(window.navigator.userAgent)||/BB10/i.test(window.navigator.userAgent))return false;return true};AbstractChosen.default_multiple_text="Select Some Options";AbstractChosen.default_single_text="Select an Option";AbstractChosen.default_no_result_text="No results match";return AbstractChosen}();$=jQuery;$.fn.extend({chosen:function(options){if(!AbstractChosen.browser_is_supported())return this;
return this.each(function(input_field){var $this,chosen;$this=$(this);chosen=$this.data("chosen");if(options==="destroy"){if(chosen instanceof Chosen)chosen.destroy();return}if(!(chosen instanceof Chosen))$this.data("chosen",new Chosen(this,options))})}});Chosen=function(superClass){extend(Chosen,superClass);function Chosen(){return Chosen.__super__.constructor.apply(this,arguments)}Chosen.prototype.setup=function(){this.form_field_jq=$(this.form_field);return this.current_selectedIndex=this.form_field.selectedIndex};
Chosen.prototype.set_up_html=function(){var container_classes,container_props;container_classes=["chosen-container"];container_classes.push("chosen-container-"+(this.is_multiple?"multi":"single"));if(this.inherit_select_classes&&this.form_field.className)container_classes.push(this.form_field.className);if(this.is_rtl)container_classes.push("chosen-rtl");container_props={"class":container_classes.join(" "),"title":this.form_field.title};if(this.form_field.id.length)container_props.id=this.form_field.id.replace(/[^\w]/g,
"_")+"_chosen";this.container=$("<div />",container_props);this.container.width(this.container_width());if(this.is_multiple)this.container.html(this.get_multi_html());else this.container.html(this.get_single_html());this.form_field_jq.hide().after(this.container);this.dropdown=this.container.find("div.chosen-drop").first();this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chosen-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();
if(this.is_multiple){this.search_choices=this.container.find("ul.chosen-choices").first();this.search_container=this.container.find("li.search-field").first()}else{this.search_container=this.container.find("div.chosen-search").first();this.selected_item=this.container.find(".chosen-single").first()}this.results_build();this.set_tab_index();return this.set_label_behavior()};Chosen.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})};Chosen.prototype.register_observers=
function(){this.container.on("touchstart.chosen",function(_this){return function(evt){_this.container_mousedown(evt)}}(this));this.container.on("touchend.chosen",function(_this){return function(evt){_this.container_mouseup(evt)}}(this));this.container.on("mousedown.chosen",function(_this){return function(evt){_this.container_mousedown(evt)}}(this));this.container.on("mouseup.chosen",function(_this){return function(evt){_this.container_mouseup(evt)}}(this));this.container.on("mouseenter.chosen",function(_this){return function(evt){_this.mouse_enter(evt)}}(this));
this.container.on("mouseleave.chosen",function(_this){return function(evt){_this.mouse_leave(evt)}}(this));this.search_results.on("mouseup.chosen",function(_this){return function(evt){_this.search_results_mouseup(evt)}}(this));this.search_results.on("mouseover.chosen",function(_this){return function(evt){_this.search_results_mouseover(evt)}}(this));this.search_results.on("mouseout.chosen",function(_this){return function(evt){_this.search_results_mouseout(evt)}}(this));this.search_results.on("mousewheel.chosen DOMMouseScroll.chosen",
function(_this){return function(evt){_this.search_results_mousewheel(evt)}}(this));this.search_results.on("touchstart.chosen",function(_this){return function(evt){_this.search_results_touchstart(evt)}}(this));this.search_results.on("touchmove.chosen",function(_this){return function(evt){_this.search_results_touchmove(evt)}}(this));this.search_results.on("touchend.chosen",function(_this){return function(evt){_this.search_results_touchend(evt)}}(this));this.form_field_jq.on("chosen:updated.chosen",
function(_this){return function(evt){_this.results_update_field(evt)}}(this));this.form_field_jq.on("chosen:activate.chosen",function(_this){return function(evt){_this.activate_field(evt)}}(this));this.form_field_jq.on("chosen:open.chosen",function(_this){return function(evt){_this.container_mousedown(evt)}}(this));this.form_field_jq.on("chosen:close.chosen",function(_this){return function(evt){_this.close_field(evt)}}(this));this.search_field.on("blur.chosen",function(_this){return function(evt){_this.input_blur(evt)}}(this));
this.search_field.on("keyup.chosen",function(_this){return function(evt){_this.keyup_checker(evt)}}(this));this.search_field.on("keydown.chosen",function(_this){return function(evt){_this.keydown_checker(evt)}}(this));this.search_field.on("focus.chosen",function(_this){return function(evt){_this.input_focus(evt)}}(this));this.search_field.on("cut.chosen",function(_this){return function(evt){_this.clipboard_event_checker(evt)}}(this));this.search_field.on("paste.chosen",function(_this){return function(evt){_this.clipboard_event_checker(evt)}}(this));
if(this.is_multiple)return this.search_choices.on("click.chosen",function(_this){return function(evt){_this.choices_click(evt)}}(this));else return this.container.on("click.chosen",function(evt){evt.preventDefault()})};Chosen.prototype.destroy=function(){$(this.container[0].ownerDocument).off("click.chosen",this.click_test_action);if(this.form_field_label.length>0)this.form_field_label.off("click.chosen");if(this.search_field[0].tabIndex)this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex;
this.container.remove();this.form_field_jq.removeData("chosen");return this.form_field_jq.show()};Chosen.prototype.search_field_disabled=function(){this.is_disabled=this.form_field.disabled||this.form_field_jq.parents("fieldset").is(":disabled");this.container.toggleClass("chosen-disabled",this.is_disabled);this.search_field[0].disabled=this.is_disabled;if(!this.is_multiple)this.selected_item.off("focus.chosen",this.activate_field);if(this.is_disabled)return this.close_field();else if(!this.is_multiple)return this.selected_item.on("focus.chosen",
this.activate_field)};Chosen.prototype.container_mousedown=function(evt){var ref;if(this.is_disabled)return;if(evt&&(ref=evt.type)==="mousedown"&&!this.results_showing)evt.preventDefault();if(!(evt!=null&&$(evt.target).hasClass("search-choice-close"))){if(!this.active_field){if(this.is_multiple)this.search_field.val("");$(this.container[0].ownerDocument).on("click.chosen",this.click_test_action);this.results_show()}else if(!this.is_multiple&&evt&&($(evt.target)[0]===this.selected_item[0]||$(evt.target).parents("a.chosen-single").length)){evt.preventDefault();
this.results_toggle()}return this.activate_field()}};Chosen.prototype.container_mouseup=function(evt){if(evt.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(evt)};Chosen.prototype.search_results_mousewheel=function(evt){var delta;if(evt.originalEvent)delta=evt.originalEvent.deltaY||-evt.originalEvent.wheelDelta||evt.originalEvent.detail;if(delta!=null){evt.preventDefault();if(evt.type==="DOMMouseScroll")delta=delta*40;return this.search_results.scrollTop(delta+this.search_results.scrollTop())}};
Chosen.prototype.blur_test=function(evt){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()};Chosen.prototype.close_field=function(){$(this.container[0].ownerDocument).off("click.chosen",this.click_test_action);this.active_field=false;this.results_hide();this.container.removeClass("chosen-container-active");this.clear_backstroke();this.show_search_field_default();this.search_field_scale();return this.search_field.blur()};Chosen.prototype.activate_field=
function(){if(this.is_disabled)return;this.container.addClass("chosen-container-active");this.active_field=true;this.search_field.val(this.search_field.val());if(!is_mobile)return this.search_field.focus()};Chosen.prototype.test_active_click=function(evt){var active_container;active_container=$(evt.target).closest(".chosen-container");if(active_container.length&&this.container[0]===active_container[0])return this.active_field=true;else return this.close_field()};Chosen.prototype.results_build=function(){this.parsing=
true;this.selected_option_count=null;this.results_data=SelectParser.select_to_array(this.form_field);if(this.is_multiple)this.search_choices.find("li.search-choice").remove();else if(!this.is_multiple){this.single_set_selected_text();if(this.disable_search||this.form_field.options.length<=this.disable_search_threshold){this.search_field[0].readOnly=true;this.container.addClass("chosen-container-single-nosearch")}else{this.search_field[0].readOnly=false;this.container.removeClass("chosen-container-single-nosearch")}}this.update_results_content(this.results_option_build({first:true}));
this.search_field_disabled();this.show_search_field_default();this.search_field_scale();return this.parsing=false};Chosen.prototype.result_do_highlight=function(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){this.result_clear_highlight();this.result_highlight=el;this.result_highlight.addClass("highlighted");maxHeight=parseInt(this.search_results.css("maxHeight"),10);visible_top=this.search_results.scrollTop();visible_bottom=maxHeight+visible_top;high_top=this.result_highlight.position().top+
this.search_results.scrollTop();high_bottom=high_top+this.result_highlight.outerHeight();if(high_bottom>=visible_bottom)return this.search_results.scrollTop(high_bottom-maxHeight>0?high_bottom-maxHeight:0);else if(high_top<visible_top)return this.search_results.scrollTop(high_top)}};Chosen.prototype.result_clear_highlight=function(){if(this.result_highlight)this.result_highlight.removeClass("highlighted");return this.result_highlight=null};Chosen.prototype.results_show=function(){if(this.is_multiple&&
this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false}if(!this.is_multiple)this.search_container.append(this.search_field);this.container.addClass("chosen-with-drop");this.results_showing=true;if(!is_mobile)this.search_field.focus();this.search_field.val(this.get_search_field_value());this.winnow_results();return this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this})};Chosen.prototype.update_results_content=function(content){return this.search_results.html(content)};
Chosen.prototype.results_hide=function(){if(this.results_showing){this.result_clear_highlight();if(!this.is_multiple){this.selected_item.prepend(this.search_field);if(!is_mobile)this.search_field.focus()}this.container.removeClass("chosen-with-drop");this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})}return this.results_showing=false};Chosen.prototype.set_tab_index=function(el){var ti;if(this.form_field.tabIndex){ti=this.form_field.tabIndex;this.form_field.tabIndex=-1;return this.search_field[0].tabIndex=
ti}};Chosen.prototype.set_label_behavior=function(){this.form_field_label=this.form_field_jq.parents("label");if(!this.form_field_label.length&&this.form_field.id.length)this.form_field_label=$("label[for='"+this.form_field.id+"']");if(this.form_field_label.length>0)return this.form_field_label.on("click.chosen",this.label_click_handler)};Chosen.prototype.show_search_field_default=function(){if(this.is_multiple&&this.choices_count()<1&&!this.active_field){this.search_field.val(this.default_text);
return this.search_field.addClass("default")}else{this.search_field.val("");return this.search_field.removeClass("default")}};Chosen.prototype.search_results_mouseup=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target.length){this.result_highlight=target;this.result_select(evt);if(!is_mobile)return this.search_field.focus()}};Chosen.prototype.search_results_mouseover=function(evt){var target;target=$(evt.target).hasClass("active-result")?
$(evt.target):$(evt.target).parents(".active-result").first();if(target)return this.result_do_highlight(target)};Chosen.prototype.search_results_mouseout=function(evt){if($(evt.target).hasClass("active-result")||$(evt.target).parents(".active-result").first())return this.result_clear_highlight()};Chosen.prototype.choice_build=function(item){var choice,close_link;choice=$("<li />",{"class":"search-choice"}).html("<span>"+this.choice_label(item)+"</span>");if(item.disabled)choice.addClass("search-choice-disabled");
else{close_link=$("<a />",{"class":"search-choice-close","data-option-array-index":item.array_index});close_link.on("click.chosen",function(_this){return function(evt){return _this.choice_destroy_link_click(evt)}}(this));choice.append(close_link)}return this.search_container.before(choice)};Chosen.prototype.choice_destroy_link_click=function(evt){evt.preventDefault();evt.stopPropagation();if(!this.is_disabled)return this.choice_destroy($(evt.target))};Chosen.prototype.choice_destroy=function(link){if(this.result_deselect(link[0].getAttribute("data-option-array-index"))){if(this.active_field){if(!is_mobile)this.search_field.focus()}else this.show_search_field_default();
if(this.is_multiple&&this.choices_count()>0&&this.get_search_field_value().length<1)this.results_hide();link.parents("li").first().remove();return this.search_field_scale()}};Chosen.prototype.results_reset=function(){this.reset_single_select_options();this.form_field.options[0].selected=true;this.single_set_selected_text();this.show_search_field_default();this.results_reset_cleanup();this.trigger_form_field_change();if(this.active_field)return this.results_hide()};Chosen.prototype.results_reset_cleanup=
function(){this.current_selectedIndex=this.form_field.selectedIndex;return this.selected_item.find("abbr").remove()};Chosen.prototype.result_select=function(evt){var high,item;if(this.result_highlight){high=this.result_highlight;this.result_clear_highlight();if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false}if(this.is_multiple)high.removeClass("active-result");else this.reset_single_select_options();high.addClass("result-selected");
item=this.results_data[high[0].getAttribute("data-option-array-index")];item.selected=true;this.form_field.options[item.options_index].selected=true;this.selected_option_count=null;this.search_field.val("");if(this.is_multiple)this.choice_build(item);else this.single_set_selected_text(this.choice_label(item));if(this.is_multiple&&(!this.hide_results_on_select||(evt.metaKey||evt.ctrlKey)))this.winnow_results();else{this.results_hide();this.show_search_field_default()}if(this.is_multiple||this.form_field.selectedIndex!==
this.current_selectedIndex)this.trigger_form_field_change({selected:this.form_field.options[item.options_index].value});this.current_selectedIndex=this.form_field.selectedIndex;evt.preventDefault();return this.search_field_scale()}};Chosen.prototype.single_set_selected_text=function(text){if(text==null)text=this.default_text;if(text===this.default_text)this.selected_item.addClass("chosen-default");else{this.single_deselect_control_build();this.selected_item.removeClass("chosen-default")}return this.selected_item.find("span").html(text)};
Chosen.prototype.result_deselect=function(pos){var result_data;result_data=this.results_data[pos];if(!this.form_field.options[result_data.options_index].disabled){result_data.selected=false;this.form_field.options[result_data.options_index].selected=false;this.selected_option_count=null;this.result_clear_highlight();if(this.results_showing)this.winnow_results();this.trigger_form_field_change({deselected:this.form_field.options[result_data.options_index].value});this.search_field_scale();return true}else return false};
Chosen.prototype.single_deselect_control_build=function(){if(!this.allow_single_deselect)return;if(!this.selected_item.find("abbr").length)this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>');return this.selected_item.addClass("chosen-single-with-deselect")};Chosen.prototype.get_search_field_value=function(){return this.search_field.val()};Chosen.prototype.get_search_text=function(){return $.trim(this.get_search_field_value())};Chosen.prototype.escape_html=function(text){return $("<div/>").text(text).html()};
Chosen.prototype.winnow_results_set_highlight=function(){var do_high,selected_results;selected_results=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[];do_high=selected_results.length?selected_results.first():this.search_results.find(".active-result").first();if(do_high!=null)return this.result_do_highlight(do_high)};Chosen.prototype.no_results=function(terms){var no_results_html;no_results_html=this.get_no_results_html(terms);this.search_results.append(no_results_html);
return this.form_field_jq.trigger("chosen:no_results",{chosen:this})};Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};Chosen.prototype.keydown_arrow=function(){var next_sib;if(this.results_showing&&this.result_highlight){next_sib=this.result_highlight.nextAll("li.active-result").first();if(next_sib)return this.result_do_highlight(next_sib)}else return this.results_show()};Chosen.prototype.keyup_arrow=function(){var prev_sibs;if(!this.results_showing&&
!this.is_multiple)return this.results_show();else if(this.result_highlight){prev_sibs=this.result_highlight.prevAll("li.active-result");if(prev_sibs.length)return this.result_do_highlight(prev_sibs.first());else{if(this.choices_count()>0)this.results_hide();return this.result_clear_highlight()}}};Chosen.prototype.keydown_backstroke=function(){var next_available_destroy;if(this.pending_backstroke){this.choice_destroy(this.pending_backstroke.find("a").first());return this.clear_backstroke()}else{next_available_destroy=
this.search_container.siblings("li.search-choice").last();if(next_available_destroy.length&&!next_available_destroy.hasClass("search-choice-disabled")){this.pending_backstroke=next_available_destroy;if(this.single_backstroke_delete)return this.keydown_backstroke();else return this.pending_backstroke.addClass("search-choice-focus")}}};Chosen.prototype.clear_backstroke=function(){if(this.pending_backstroke)this.pending_backstroke.removeClass("search-choice-focus");return this.pending_backstroke=null};
Chosen.prototype.search_field_scale=function(){var div,i,len,style,style_block,styles,width;if(!this.is_multiple)return;style_block={position:"absolute",left:"-1000px",top:"-1000px",display:"none",whiteSpace:"pre"};styles=["fontSize","fontStyle","fontWeight","fontFamily","lineHeight","textTransform","letterSpacing"];for(i=0,len=styles.length;i<len;i++){style=styles[i];style_block[style]=this.search_field.css(style)}div=$("<div />").css(style_block);div.text(this.get_search_field_value());$("body").append(div);
width=div.width()+25;div.remove();if(this.container.is(":visible"))width=Math.min(this.container.outerWidth()-10,width);return this.search_field.width(width)};Chosen.prototype.trigger_form_field_change=function(extra){this.form_field_jq.trigger("input",extra);return this.form_field_jq.trigger("change",extra)};return Chosen}(AbstractChosen)}).call(this);
